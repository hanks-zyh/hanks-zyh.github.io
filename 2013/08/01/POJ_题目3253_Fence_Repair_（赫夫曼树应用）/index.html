<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>POJ 题目3253 Fence Repair （赫夫曼树应用） | Hanks.xyz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="article">
<meta property="og:title" content="POJ 题目3253 Fence Repair （赫夫曼树应用）">
<meta property="og:url" content="http://hanks.xyz/2013/08/01/POJ_题目3253_Fence_Repair_（赫夫曼树应用）/index.html">
<meta property="og:site_name" content="Hanks.xyz">
<meta property="og:description">
<meta property="og:updated_time" content="2015-12-04T17:20:04.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="POJ 题目3253 Fence Repair （赫夫曼树应用）">
<meta name="twitter:description">
  
  
    <link rel="icon" href="/images/favicon.png">
  
  <!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'> -->
  <!-- <link href="//fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css"> -->
  <link href="//fonts.useso.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css">
  <link href='//fonts.useso.com/css?family=Open+Sans:300,600' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <a href="/" class="logo">Hanks.xyz</a>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about/index.html">关于</a>
        
          <a class="main-nav-link" href="/collections">收集</a>
        
          <a class="main-nav-link" href="/atom.xml">RSS</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://hanks.xyz"></form>
        </div>
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
        
        
          <a id="nav-github-link" class="nav-icon" href="https://github.com/hanks-zyh" title="Fork me on GitHub"></a>
        
      </nav>
    </div>
  </div>
</header>
      <nav id="mobile-nav" class="off">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about/index.html" class="mobile-nav-link">关于</a>
  
    <a href="/collections" class="mobile-nav-link">收集</a>
  
    <a href="/atom.xml" class="mobile-nav-link">RSS</a>
  
  <div id="search-form-wrap-mobile">
    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://hanks.xyz"></form>
  </div>
</nav>
      <div class="outer">
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <div class="info">
     <div class="content">
       <div>
         <a href="https://github.com/hanks-zyh"><img class="avatar" src="https://avatars2.githubusercontent.com/u/6268322?v=3&s=460" alt="" /></a>
       </div>
       <div class="name">
         <h2 >Hanks</h2>
       </div>
       <p>90后,Android,学习永无止境！</p>
       <div class="account">
         <div class="account-item">
           <a href="http://weibo.com/u/2359002991"><img src="http://hkcoding.sinaapp.com/static/images/ico_05_1.jpg" style="width:40px;height:40px"></a>
         </div>
         <div class="account-item">
              <a href="http://www.zhihu.com/people/yuhan-zhang-36"><img src="http://hkcoding.sinaapp.com/static/images/ico_zhihu.png" style="width:40px;height:40px"></a>
         </div>
         <div class="account-item">
           <a href="http://hanks.xyz/atom.xml"> <img src="http://hkcoding.sinaapp.com/static/images/ico_04_1.jpg" style="width:40px;height:40px"></a>
         </div>
       </div>
     </div>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <h3 class="widget-title">最新发布</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/01/20/android-optimization/">Android性能优化</a>
          </li>
        
          <li>
            <a href="/2016/01/14/framework-application/">Framework分析-Application的onCreate</a>
          </li>
        
          <li>
            <a href="/2016/01/11/react-native-23333/">React-Native 鬼畜表情包app</a>
          </li>
        
          <li>
            <a href="/2016/01/05/android-myhotfix/">Android 动手实现热修复</a>
          </li>
        
          <li>
            <a href="/2016/01/03/android-hotfix/">Android 热修复总结</a>
          </li>
        
          <li>
            <a href="/2015/12/31/2015/">2015回顾@hanks</a>
          </li>
        
          <li>
            <a href="/2015/12/30/snowfall/">Android 下雪动画</a>
          </li>
        
          <li>
            <a href="/2015/12/30/react-zhihu/">React-Native 知乎日报首页</a>
          </li>
        
          <li>
            <a href="/2015/12/29/react-userinfo/">React-Native 练习用户信息界面</a>
          </li>
        
          <li>
            <a href="/2015/12/29/react-viewpager/">React-Native 实现Android中的ViewPager</a>
          </li>
        
          <li>
            <a href="/2015/12/24/react-navigator/">React-Native 的Navigator控制界面跳转</a>
          </li>
        
          <li>
            <a href="/2015/12/23/react-network/">React-Native 网络请求</a>
          </li>
        
          <li>
            <a href="/2015/12/22/react-components/">React-Native 组件练习-购物app侧滑菜单</a>
          </li>
        
          <li>
            <a href="/2015/12/21/react-flexbox/">React-Native中的布局</a>
          </li>
        
          <li>
            <a href="/2015/12/18/atom-nuclide/">Atom安装Nuclide</a>
          </li>
        
      </ul>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/">Android</a> <a href="/tags/Atom/">Atom</a> <a href="/tags/Framework/">Framework</a> <a href="/tags/Java/">Java</a> <a href="/tags/OS-X/">OS X</a> <a href="/tags/React-Native/">React-Native</a> <a href="/tags/Refactoring/">Refactoring</a> <a href="/tags/Rx/">Rx</a> <a href="/tags/RxJava/">RxJava</a> <a href="/tags/Rxandroid/">Rxandroid</a> <a href="/tags/Rxjava/">Rxjava</a> <a href="/tags/Ubuntu/">Ubuntu</a> <a href="/tags/mac-os/">mac os</a> <a href="/tags/virtualBox/">virtualBox</a> <a href="/tags/必备知识/">必备知识</a> <a href="/tags/性能优化/">性能优化</a> <a href="/tags/热修复/">热修复</a>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <div class="widget">
     <iframe width="100%" height="200" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=1&ptype=0&speed=0&skin=1&isTitle=0&noborder=0&isWeibo=0&isFans=1&uid=2359002991&verifier=05864e99&colors=4ABC88,ffffff,2C3E50,4ABC88,ecfbfd&dpc=1"></iframe>
    </div>
  </div>


  
    
  <div class="widget-wrap mdl-shadow--2dp">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="https://github.com/hanks-zyh">hanks-zyh</a>
          </li>
        
          <li>
            <a href="http://kiya.space">kiya-z</a>
          </li>
        
          <li>
            <a href="http://hexo.io">Hexo</a>
          </li>
        
      </ul>
    </div>
  </div>


  
</aside>
        
        <section id="main" class="mdl-shadow--2dp"><article id="post-POJ_题目3253_Fence_Repair_（赫夫曼树应用）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/08/01/POJ_题目3253_Fence_Repair_（赫夫曼树应用）/" class="article-date">
  <time datetime="2013-08-01T06:43:00.000Z" itemprop="datePublished">2013-08-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      POJ 题目3253 Fence Repair （赫夫曼树应用）
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p>本题主要利用赫夫曼树的原理，</p>
<p>&nbsp;</p>
<div lang="en-US" class="ptt" align="center"><strong><span style="font-size:18px; color:#3366ff">Fence Repair</span></strong></div>
<div class="plm">
<table align="center">
<tbody>
<tr>
<td><strong>Time Limit:</strong> 2000MS</td>
<td width="10">&nbsp;</td>
<td><strong>Memory Limit:</strong> 65536K</td>
</tr>
<tr>
<td><strong>Total Submissions:</strong> 19794</td>
<td width="10">&nbsp;</td>
<td><strong>Accepted:</strong> 6276</td>
</tr>
</tbody>
</table>
</div>
<p class="pst">Description</p>
<div lang="en-US" class="ptx">
<p>Farmer John wants to repair a small length of the fence around the pasture. He measures the fence and finds that he needs<em>N</em> (1 ≤
<em>N</em> ≤ 20,000) planks of wood, each having some integer length<em>L<sub>i</sub></em> (1 ≤
<em>L<sub>i</sub></em> ≤ 50,000) units. He then purchases a single long board just long enough to saw into the<em>N</em> planks (i.e., whose length is the sum of the lengths
<em>L<sub>i</sub></em>). FJ is ignoring the &quot;kerf&quot;, the extra length lost to sawdust when a sawcut is made; you should ignore it, too.</p>
<p>FJ sadly realizes that he doesn't own a saw with which to cut the wood, so he mosies over to Farmer Don's Farm with this long board and politely asks if he may borrow a saw.</p>
<p>Farmer Don, a closet capitalist, doesn't lend FJ a saw but instead offers to charge Farmer John for each of the<em>N</em>-1 cuts in the plank. The charge to cut a piece of wood is exactly equal to its length. Cutting a plank of length 21 costs 21 cents.</p>
<p>Farmer Don then lets Farmer John decide the order and locations to cut the plank. Help Farmer John determine the minimum amount of money he can spend to create the<em>N</em> planks. FJ knows that he can cut the board in various different orders which will
 result in different charges since the resulting intermediate planks are of different lengths.</p>
</div>
<p class="pst">Input</p>
<div lang="en-US" class="ptx">Line 1: One integer <em>N</em>, the number of planks<br>
Lines 2..<em>N</em>&#43;1: Each line contains a single integer describing the length of a needed plank</div>
<p class="pst">Output</p>
<div lang="en-US" class="ptx">Line 1: One integer: the minimum amount of money he must spend to make<em>N</em>-1 cuts</div>
<p class="pst">Sample Input</p>
<pre class="sio">3
8
5
8</pre>
<p class="pst">Sample Output</p>
<pre class="sio">34</pre>
<p class="pst">Hint</p>
<div lang="en-US" class="ptx">He wants to cut a board of length 21 into pieces of lengths 8, 5, and 8.<br>
The original board measures 8&#43;5&#43;8=21. The first cut will cost 21, and should be used to cut the board into pieces measuring 13 and 8. The second cut will cost 13, and should be used to cut the 13 into 8 and 5. This would cost 21&#43;13=34. If the 21 was cut into
 16 and 5 instead, the second cut would cost 16 for a total of 37 (which is more than 34).</div>
<div lang="en-US" class="ptx">&nbsp;</div>
<div lang="en-US" class="ptx">&nbsp;</div>
<p><strong><span style="font-size:18px">解题思路 ：要将长度为n的一个长木板 分成若干短的，分解长度为n的木板需要花费n；</span></strong></p>
<p><strong><span style="font-size:18px">如题中给出要求的3个木板长度，所以最初开始木板长度为 8&#43;5&#43;8=21</span></strong></p>
<p><strong><span style="font-size:18px">将长度为21的木板分解成3段，并且要求花费最少，</span></strong></p>
<p><strong><span style="font-size:18px">第一次分解 21， 分成8和13，</span></strong></p>
<p><strong><span style="font-size:18px">第二次分解 13，分成8和5，此种分法花费最少，但这种分法是什么规则呢？？？？</span></strong></p>
<p><strong><span style="font-size:18px"></span></strong>&nbsp;</p>
<p><strong><span style="font-size:18px">倒过来逆向思维，将若干个长度的木板拼接成一个，每两个（长度a，b）拼成一个长度为（a&#43;b），就花费 （a&#43;b）元</span></strong></p>
<p><strong><span style="font-size:18px">要使总花费最少，则每次选择长度最小的两个拼接，，就像建立赫夫曼树那样来做</span></strong></p>
<p><strong><span style="font-size:18px"></span></strong>&nbsp;</p>
<p><strong><span style="font-size:18px"></span></strong>&nbsp;</p>
<p><strong><span style="font-size:18px">第一次代码：超时，，，，建立一个一位数组，从0开始存元素，dao下标n-1，，，</span></strong></p>
<p><strong><span style="font-size:18px">将它们从大到小排序，，取出后两个相加，将和sum放到数组后面，代替那两个组小&#20540;，数组元素--；</span></strong></p>
<p><strong><span style="font-size:18px">然后将数组再次里面排序，取最小&#20540;两个，重复，&#20540;到剩一个，</span></strong></p>
<p><strong><span style="font-size:18px">每次取出的两个最小的和 累加起来 即为最少花费！！</span></strong></p>
<p>超时代码：</p>
<pre class="cpp" name="code">#include &lt;string.h&gt;
#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
#include &lt;stdlib.h&gt;
#include &lt;algorithm&gt;
using namespace std;

int a[20002];
bool cmp(int a,int b)
{
	if(a&gt;b) return true;
	return false;
}
void Haffman(int num)
{
/*
4
3 6 1 4
*/
	int n = num;
	int i;
	int sum =0;
	while(n--)
	{
	//	printf(&quot;sum=%d\n&quot;,sum);
		sort(a,a+n+1,cmp);
	//	for(i=0;i&lt;n+1;i++) printf(&quot;%d &quot;,a[i]);
	//	printf(&quot;\n&quot;);
		a[n-1] = a[n]+a[n-1];
		sum += a[n-1];
		if(n==1) break;
	}
	printf(&quot;%d\n&quot;,sum);
		
}

int main()
{
	int i,n;
//	int a[10001];
	scanf(&quot;%d&quot;,&amp;n);
	for(i=0;i&lt;n;i++)
		scanf(&quot;%d&quot;,&amp;a[i]);	
	//	scanf(&quot;%d&quot;,&amp;tree[i].weigth);	
	
	Haffman(n);			
		
	system(&quot;pause&quot;);
	return 0;	
}

</pre>
<p><br>
第二次代码：时间：500MS </p>
<p>其实不用每次都进行排序，第一次排完序之后，将新得到的和直接再插入到数组内即可，数组仍然有序</p>
<pre class="html" name="code">#include &lt;string.h&gt;
#include &lt;stdio.h&gt;
#include &lt;iostream&gt;
#include &lt;stdlib.h&gt;
#include &lt;algorithm&gt;
using namespace std;

int a[20002];
int  cmp(const void  * a,const void * b)
{
	return *(int *)b  - *(int *)a;
}
void Haffman(int num)
{
/*
6
3 6 1 4 5 2
*/
	int n = num;
	int i,j,k;
	long long sum =0;
	qsort(a,n,sizeof(int),cmp);
	
	for(i=0;i&lt;n-1;i++)
	{		
		int temp = a[num-1]+a[num-2];
		for(j=n-1;j&gt;=0;j--)//将和插入到数组里面
		{
			if(temp&lt;a[j]) break;
			else a[j+1] = a[j];		
		}
		a[j+1] = temp; 
		sum += temp;//每次的和累加
		num--;
	}
	printf(&quot;%lld\n&quot;,sum);
		
}

int main()
{
	int i,n;

	while(scanf(&quot;%d&quot;,&amp;n)!=EOF)
	{
		for(i=0;i&lt;n;i++)
				scanf(&quot;%d&quot;,&amp;a[i]);		
		if(n==1) printf(&quot;0\n&quot;);	
		else	Haffman(n);	
	}		
	//system(&quot;pause&quot;);
	return 0;	
}


</pre>
<p><br>
&nbsp;</p>
<p>&nbsp;</p>
<p><strong><span style="font-size:18px"></span></strong>&nbsp;下面是别人用的堆排序做的，时间90MS</p>
<pre class="cpp" name="code">#include &lt;iostream&gt;
using namespace std;
typedef long long int64;
int len;
int64 arr[20001]; //arr[0] 存数当前数组的长度

//调整堆
void heap(int i) {
	int left = i * 2;
	int right = i * 2 + 1;
	int mins = i;
	if (left &lt;= arr[0] &amp;&amp; arr[left] &lt; arr[mins])
		mins = left;
	if (right &lt;= arr[0] &amp;&amp; arr[right] &lt; arr[mins])
		mins = right;
	if (i != mins) {
		swap(arr[i], arr[mins]);
		heap(mins);
	}
}

//想堆中插入一个数
void inheap(int64 key) {
	arr[++arr[0]] = key;
	int64 i = arr[0];
	//i就是当前插入的最后位置. 循环 lgn 次即可
	while (i &gt; 1 &amp;&amp; arr[i] &lt; arr[i / 2]) {
		swap(arr[i], arr[i / 2]);
		i = i / 2;
	}
}

//返回最小的两个数的和
int64 get() {
	int64 p = arr[1], q;
	arr[1] = arr[arr[0]]; //第一个位置 和 最后一个位置交换
	arr[0]--; //数组长度减1
	heap(1); //调整位置1
	q = arr[1];
	arr[1] = arr[arr[0]];
	arr[0]--;
	heap(1);
	inheap(p + q); //返回最小的两个数的和
	return p + q;
}

int main() {
	while (cin &gt;&gt; len) {
		arr[0] = 0;
		for (int i = 1; i &lt;= len; i++) {
			cin &gt;&gt; arr[i];
			inheap(arr[i]);
		}
		int64 ans = 0;
		for (int i = 1; i &lt; len; i++) {
			ans += get();
		}
		cout &lt;&lt; ans &lt;&lt; endl;
	}
	return 0;
}


</pre>
<p><br>
&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

      
    </div>

  
  
</article>

  
<section id="comments">
    <!-- 多说分享框 -->
    <div class="ds-share flat" data-thread-key="/2013/08/01/POJ_题目3253_Fence_Repair_（赫夫曼树应用）/" data-title="POJ 题目3253 Fence Repair （赫夫曼树应用）" data-images="https://raw.githubusercontent.com/Hankiya/LoveOnline/master/Rich%20Format%20Vertical.png" data-content="POJ 题目3253 Fence Repair （赫夫曼树应用）" data-url="http://hanks.xyz//2013/08/01/POJ_题目3253_Fence_Repair_（赫夫曼树应用）/">
    <div class="ds-share-inline">
      <ul  class="ds-share-icons-16">

      	<li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
        <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
        <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
        <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
        <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>
      </ul>
      <div class="ds-share-icons-more">
      </div>
    </div>
   </div>
    <!-- 多说评论框 start -->
   	<div class="ds-thread" data-thread-key="/2013/08/01/POJ_题目3253_Fence_Repair_（赫夫曼树应用）/" data-title="POJ 题目3253 Fence Repair （赫夫曼树应用）" data-url="http://hanks.xyz//2013/08/01/POJ_题目3253_Fence_Repair_（赫夫曼树应用）/"></div>
   <!-- 多说评论框 end -->
   <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
   <script type="text/javascript">
   var duoshuoQuery = {short_name:"hanks-zyh"};
   	(function() {
   		var ds = document.createElement('script');
   		ds.type = 'text/javascript';ds.async = true;
   		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
   		ds.charset = 'UTF-8';
   		(document.getElementsByTagName('head')[0]
   		 || document.getElementsByTagName('body')[0]).appendChild(ds);
   	})();
   	</script>
   <!-- 多说公共JS代码 end -->
</section>

</section>
      </div>
      <footer id="footer">
  
  <div class="outer footer_center">
    <div id="footer-info" class="inner">
      &copy; 2016 Hanks<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
  </br>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv">总访问量<span id="busuanzi_value_site_pv"></span>次</span>
    </div>
  </div>
</footer>

    </div>
    

<script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/jquery.scrollLoading.js" type="text/javascript"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>
