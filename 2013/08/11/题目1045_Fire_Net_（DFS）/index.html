<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>题目1045 Fire Net （DFS） | Hanks.xyz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="article">
<meta property="og:title" content="题目1045 Fire Net （DFS）">
<meta property="og:url" content="http://hanks.xyz/2013/08/11/题目1045_Fire_Net_（DFS）/index.html">
<meta property="og:site_name" content="Hanks.xyz">
<meta property="og:description">
<meta property="og:image" content="http://acm.hdu.edu.cn/data/images/1045-1.jpg">
<meta property="og:updated_time" content="2015-12-04T17:20:04.332Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="题目1045 Fire Net （DFS）">
<meta name="twitter:description">
  
  
    <link rel="icon" href="/favicon.png">
  
  <!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'> -->
  <!-- <link href="//fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css"> -->
  <link href="//fonts.useso.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css">
  <link href='//fonts.useso.com/css?family=Open+Sans:300,600' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <a href="/" class="logo">Hanks.xyz</a>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about/index.html">关于</a>
        
          <a class="main-nav-link" href="/atom.xml">RSS</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://hanks.xyz"></form>
        </div>
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
        
        
          <a id="nav-github-link" class="nav-icon" href="https://github.com/hanks-zyh" title="Fork me on GitHub"></a>
        
      </nav>
    </div>
  </div>
</header>
      <nav id="mobile-nav" class="off">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about/index.html" class="mobile-nav-link">关于</a>
  
    <a href="/atom.xml" class="mobile-nav-link">RSS</a>
  
  <div id="search-form-wrap-mobile">
    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://hanks.xyz"></form>
  </div>
</nav>
      <div class="outer">
        
        <section id="main"><article id="post-题目1045_Fire_Net_（DFS）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/08/11/题目1045_Fire_Net_（DFS）/" class="article-date">
  <time datetime="2013-08-11T06:26:00.000Z" itemprop="datePublished">2013-08-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      题目1045 Fire Net （DFS）
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<p></p>
<h1 style="color:rgb(26,92,200); text-align:center; font-family:'Times New Roman'">
Fire Net</h1>
<span style="font-family:'Times New Roman'; font-size:14px"><strong><span style="font-family:Arial; font-size:12px; color:green"><span style="white-space:pre"></span>Time Limit: 2000/1000 MS (Java/Others)&nbsp;&nbsp;&nbsp;&nbsp;Memory Limit: 65536/32768 K (Java/Others)<br>
<span style="white-space:pre"></span>Total Submission(s): 4961&nbsp;&nbsp;&nbsp;&nbsp;Accepted Submission(s): 2784<br>
</span></strong></span><br style="font-family:'Times New Roman'; font-size:14px">
<div class="panel_title" align="left" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Problem Description</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
Suppose that we have a square city with straight streets. A map of a city is a square board with n rows and n columns, each representing a street or a piece of wall.&nbsp;<br>
<br>
A blockhouse is a small castle that has four openings through which to shoot. The four openings are facing North, East, South, and West, respectively. There will be one machine gun shooting through each opening.&nbsp;<br>
<br>
Here we assume that a bullet is so powerful that it can run across any distance and destroy a blockhouse on its way. On the other hand, a wall is so strongly built that can stop the bullets.&nbsp;<br>
<br>
The goal is to place as many blockhouses in a city as possible so that no two can destroy each other. A configuration of blockhouses is legal provided that no two blockhouses are on the same horizontal row or vertical column in a map unless there is at least
 one wall separating them. In this problem we will consider small square cities (at most 4x4) that contain walls through which bullets cannot run through.&nbsp;<br>
<br>
The following image shows five pictures of the same board. The first picture is the empty board, the second and third pictures show legal configurations, and the fourth and fifth pictures show illegal configurations. For this board, the maximum number of blockhouses
 in a legal configuration is 5; the second picture shows one way to do it, but there are several other ways.&nbsp;<br>
<br>
<img src="http://acm.hdu.edu.cn/data/images/1045-1.jpg" alt="" style="border:none"><br>
<br>
Your task is to write a program that, given a description of a map, calculates the maximum number of blockhouses that can be placed in the city in a legal configuration.&nbsp;<br>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
&nbsp;</div>
<br style="font-family:'Times New Roman'; font-size:14px">
<div class="panel_title" align="left" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Input</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
The input file contains one or more map descriptions, followed by a line containing the number 0 that signals the end of the file. Each map description begins with a line containing a positive integer n that is the size of the city; n will be at most 4. The
 next n lines each describe one row of the map, with a '.' indicating an open space and an uppercase 'X' indicating a wall. There are no spaces in the input file.&nbsp;<br>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
&nbsp;</div>
<br style="font-family:'Times New Roman'; font-size:14px">
<div class="panel_title" align="left" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Output</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
For each test case, output one line containing the maximum number of blockhouses that can be placed in the city in a legal configuration.<br>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
&nbsp;</div>
<br style="font-family:'Times New Roman'; font-size:14px">
<div class="panel_title" align="left" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Sample Input</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
<pre style="margin-top:0px; margin-bottom:0px"><div style="font-family:'Courier New',Courier,monospace">4
.X..
....
XX..
....
2
XX
.X
3
.X.
X.X
.X.
3
...
.XX
.XX
4
....
....
....
....
0</div></pre>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
&nbsp;</div>
<br style="font-family:'Times New Roman'; font-size:14px">
<div class="panel_title" align="left" style="height:38px; background-color:transparent; padding:0px 14px; color:rgb(124,169,237); font-size:18px; font-family:Arial; font-weight:bold">
Sample Output</div>
<div class="panel_content" style="height:auto; margin:0px; padding:0px 20px; font-size:14px; font-family:'Times New Roman'">
<pre style="margin-top:0px; margin-bottom:0px"><div style="font-family:'Courier New',Courier,monospace">5
1
5
2
4</div></pre>
</div>
<div class="panel_bottom" style="height:auto; margin:0px; font-family:'Times New Roman'; font-size:14px">
&nbsp;</div>
<div><br>
</div>
<br>
<p></p>
<p><strong><span style="font-family:KaiTi_GB2312; font-size:24px; color:#cc0000">1.首先把 n*n 的大方&#26684;里的每个小方&#26684;编号 i（0,1，2,3,4,5....n*n-1），每一小&#26684;的横纵坐标分别为 row = i/n; &nbsp; col = i%n;</span></strong></p>
<p><strong><span style="font-family:KaiTi_GB2312; font-size:24px; color:#cc0000">2.从一号&#26684;&#26684;开始放置，判断能否放置，若能，则将能放置的元素个数&#43;1，继续判断第二个&#26684;&#26684;，循环直到所有的都判断完。取最大&#20540;</span></strong></p>
<p><span style="font-family:KaiTi_GB2312; font-size:24px; color:#cc0000"><strong>3.判断该位置能否放置，必须该元素所在行和列没有放置过元素（在遇到‘X’之前）</strong></span></p>
<p><br>
</p>
<p><br>
</p>
<p></p>
<pre name="code" class="cpp">#include&lt;stdio.h&gt;
#include&lt;string.h&gt;

char a[4][4]; bool vis[4][4];
int n,maxnum;

bool place(int x,int y)//判断该位置是否能放置
{
    for(int i=x-1; i&gt;=0 &amp;&amp; a[i][y]!='X';i--)
        if(vis[i][y]) return false;    

    for(int j=y-1; j&gt;=0 &amp;&amp; a[x][j]!='X';j--)
        if(vis[x][j]) return false;    
    
    return true;
}
void DFS(int i,int num)
{
    if(i== n*n){//已经判断完每一格
        maxnum = maxnum&gt;num ? maxnum : num;
        return;
    }    
    else{
        int row = i/n;   int col = i%n;
        
        if(a[row][col]=='.' &amp;&amp; place(row,col)){
            vis[row][col] = 1;
            DFS(i+1,num+1);
            vis[row][col] = 0;
        }
        DFS(i+1,num);
    }
}
int main()
{
    while(scanf(&quot;%d&quot;,&amp;n),n)
    {
        for(int i=0;i&lt;n;i++)    scanf(&quot;%s&quot;,a[i]);
        maxnum=0;
        memset(vis,0,sizeof(vis));
        DFS(0,0);
        printf(&quot;%d\n&quot;,maxnum);        
    }
    return 0;
}</pre><br>
<br>
<p></p>
<p><br>
</p>
<p><br>
</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hanks.xyz/2013/08/11/题目1045_Fire_Net_（DFS）/" data-id="cihurxde60007oe05kyjh2y4d" class="article-share-link">Share</a>
      
      
    </footer>
  
  
</article>

  
<section id="comments">
    <!-- 多说分享框 -->
    <div class="ds-share flat" data-thread-key="/2013/08/11/题目1045_Fire_Net_（DFS）/" data-title="题目1045 Fire Net （DFS）" data-images="此处请替换为分享时显示的图片的链接地址" data-content="题目1045 Fire Net （DFS）" data-url="http://hanks.xyz//2013/08/11/题目1045_Fire_Net_（DFS）/">
    <div class="ds-share-inline">
      <ul  class="ds-share-icons-16">

      	<li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
        <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
        <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
        <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
        <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>
      </ul>
      <div class="ds-share-icons-more">
      </div>
    </div>
   </div>
    <!-- 多说评论框 start -->
   	<div class="ds-thread" data-thread-key="/2013/08/11/题目1045_Fire_Net_（DFS）/" data-title="题目1045 Fire Net （DFS）" data-url="http://hanks.xyz//2013/08/11/题目1045_Fire_Net_（DFS）/"></div>
   <!-- 多说评论框 end -->
   <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
   <script type="text/javascript">
   var duoshuoQuery = {short_name:"hanks-zyh"};
   	(function() {
   		var ds = document.createElement('script');
   		ds.type = 'text/javascript';ds.async = true;
   		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
   		ds.charset = 'UTF-8';
   		(document.getElementsByTagName('head')[0]
   		 || document.getElementsByTagName('body')[0]).appendChild(ds);
   	})();
   	</script>
   <!-- 多说公共JS代码 end -->
</section>

</section>
      </div>
      <footer id="footer">
  
    <aside id="sidebar" class="outer">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/12/06/rx_thread/">Rx中的线程切换</a>
          </li>
        
          <li>
            <a href="/2015/12/04/mac_java_enviroment/">OS X中Java环境变量配置</a>
          </li>
        
          <li>
            <a href="/2015/12/02/mac-os-in-Ubuntu/">Ubuntu 安装 OS X 10.11  虚拟机</a>
          </li>
        
          <li>
            <a href="/2015/12/01/ReactiveX/">ReactiveX</a>
          </li>
        
          <li>
            <a href="/2015/11/29/rx_ux/">使用RxJava 提升用户体验</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Java/" style="font-size: 13.33px;">Java</a> <a href="/tags/OS-X/" style="font-size: 10px;">OS X</a> <a href="/tags/Rx/" style="font-size: 10px;">Rx</a> <a href="/tags/RxJava/" style="font-size: 10px;">RxJava</a> <a href="/tags/Rxandroid/" style="font-size: 10px;">Rxandroid</a> <a href="/tags/Rxjava/" style="font-size: 10px;">Rxjava</a> <a href="/tags/Ubuntu/" style="font-size: 16.67px;">Ubuntu</a> <a href="/tags/mac-os/" style="font-size: 10px;">mac os</a> <a href="/tags/virtualBox/" style="font-size: 10px;">virtualBox</a> <a href="/tags/必备知识/" style="font-size: 10px;">必备知识</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">links</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="http://kiya.space">kiya-z</a>
          </li>
        
          <li>
            <a href="http://hexo.io">Hexo</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
  
  <div class="outer footer_center">
    <div id="footer-info" class="inner">
      &copy; 2015 Hanks<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
  </br>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv">总访问量<span id="busuanzi_value_site_pv"></span>次</span>
    </div>
  </div>
</footer>

    </div>
    

<script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/jquery.scrollLoading.js" type="text/javascript"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>