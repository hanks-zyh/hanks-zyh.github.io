<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>hdu 题目1385 Minimum Transport Cost （最短路径，路径保存及筛选） | Hanks.xyz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="article">
<meta property="og:title" content="hdu 题目1385 Minimum Transport Cost （最短路径，路径保存及筛选）">
<meta property="og:url" content="http://hanks.xyz/2013/08/20/hdu_题目1385_Minimum_Transport_Cost_（最短路径，路径保存及筛选）/index.html">
<meta property="og:site_name" content="Hanks.xyz">
<meta property="og:description">
<meta property="og:updated_time" content="2015-12-04T17:20:04.308Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="hdu 题目1385 Minimum Transport Cost （最短路径，路径保存及筛选）">
<meta name="twitter:description">
  
  
    <link rel="icon" href="/favicon.png">
  
  <!-- <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'> -->
  <!-- <link href="//fonts.googleapis.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css"> -->
  <link href="//fonts.useso.com/css?family=Source+Code+Pro:400,700" rel="stylesheet" type="text/css">
  <link href='//fonts.useso.com/css?family=Open+Sans:300,600' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-outer" class="outer">
    <a href="/" class="logo">Hanks.xyz</a>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">首页</a>
        
          <a class="main-nav-link" href="/archives">归档</a>
        
          <a class="main-nav-link" href="/about/index.html">关于</a>
        
          <a class="main-nav-link" href="/atom.xml">RSS</a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://hanks.xyz"></form>
        </div>
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
        
        
          <a id="nav-github-link" class="nav-icon" href="https://github.com/hanks-zyh" title="Fork me on GitHub"></a>
        
      </nav>
    </div>
  </div>
</header>
      <nav id="mobile-nav" class="off">
  
    <a href="/" class="mobile-nav-link">首页</a>
  
    <a href="/archives" class="mobile-nav-link">归档</a>
  
    <a href="/about/index.html" class="mobile-nav-link">关于</a>
  
    <a href="/atom.xml" class="mobile-nav-link">RSS</a>
  
  <div id="search-form-wrap-mobile">
    <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://hanks.xyz"></form>
  </div>
</nav>
      <div class="outer">
        
        <section id="main"><article id="post-hdu_题目1385_Minimum_Transport_Cost_（最短路径，路径保存及筛选）" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2013/08/20/hdu_题目1385_Minimum_Transport_Cost_（最短路径，路径保存及筛选）/" class="article-date">
  <time datetime="2013-08-20T13:35:00.000Z" itemprop="datePublished">2013-08-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      hdu 题目1385 Minimum Transport Cost （最短路径，路径保存及筛选）
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        
<h1 align="center"><span style="color:#3366ff">Minimum Transport Cost </span></h1>
<h5 align="center"><span style="color:#009900">Time Limit : 2000/1000ms (Java/Other)&nbsp;&nbsp;&nbsp;Memory Limit : 65536/32768K (Java/Other)</span></h5>
<h5 align="center"><span style="color:#009900">Total Submission(s) : 19&nbsp;&nbsp;&nbsp;Accepted Submission(s) : 7</span></h5>
<h3 align="left">Problem Description</h3>
<div>These are N cities in Spring country. Between each pair of cities there may be one transportation track or none. Now there is some cargo that should be delivered from one city to another. The transportation fee consists of two parts:
<br>
The cost of the transportation on the path between these cities, and<br>
<br>
a certain tax which will be charged whenever any cargo passing through one city, except for the source and the destination cities.<br>
<br>
You must write a program to find the route which has the minimum cost.<br>
</div>
<h3>Input</h3>
<div id="proinput">First is N, number of cities. N = 0 indicates the end of input.<br>
<br>
The data of path cost, city tax, source and destination cities are given in the input, which is of the form:<br>
<br>
a11 a12 ... a1N<br>
a21 a22 ... a2N<br>
...............<br>
aN1 aN2 ... aNN<br>
b1 b2 ... bN<br>
<br>
c d<br>
e f<br>
...<br>
g h<br>
<br>
where aij is the transport cost from city i to city j, aij = -1 indicates there is no direct path between city i and city j. bi represents the tax of passing through city i. And the cargo is to be delivered from city c to city d, city e to city f, ..., and
 g = h = -1. You must output the sequence of cities passed by and the total cost which is of the form:<br>
</div>
<h3>Output</h3>
<div id="prooutput">From c to d :<br>
Path: c--&gt;c1--&gt;......--&gt;ck--&gt;d<br>
Total cost : ......<br>
......<br>
<br>
From e to f :<br>
Path: e--&gt;e1--&gt;..........--&gt;ek--&gt;f<br>
Total cost : ......<br>
<br>
Note: if there are more minimal paths, output the lexically smallest one. Print a blank line after each test case.<br>
<br>
</div>
<h3>Sample Input</h3>
<div id="prosamplein">
<pre>5
0 3 22 -1 4
3 0 5 -1 -1
22 5 0 9 20
-1 -1 9 0 4
4 -1 20 4 0
5 17 8 3 1
1 3
3 5
2 4
-1 -1
0
</pre>
</div>
<h3>Sample Output</h3>
<div id="prosampleout">
<pre>From 1 to 3 :
Path: 1--&gt;5--&gt;4--&gt;3
Total cost : 21

From 3 to 5 :
Path: 3--&gt;4--&gt;5
Total cost : 16

From 2 to 4 :
Path: 2--&gt;1--&gt;5--&gt;4
Total cost : 17
</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>需要注意保存路径时，当当有两个最短路径冲突时，要进行筛选路径</p>
<p>最短路径用的Dijkstra 算法，</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<pre class="cpp" name="code">#include&lt;iostream&gt;
#include&lt;stdio.h&gt;
#include&lt;string.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;algorithm&gt;
#define maxnum 10000
#define int_max 999999



using namespace std;
int dist[maxnum];
int prev[maxnum];
int b[maxnum];
int c[maxnum][maxnum];
int n,can;

int com(int cur,int v,int a,int b)//筛选路径
{
    int path1[maxnum];
    int path2[maxnum];
    path1[0]=cur;
    path2[0]=cur;
    int i=2,j=2;
    path1[1]=a;
    path2[1]=b;
    while(a!=v)
    {
        path1[i++]=prev[a];
        a = prev[a];
    }
    while(b!=v)
    {
        path2[j++]=prev[b];
        b= prev[b];
    }
    while(1)
    {
         i--,j--;
        if(i&lt;0) return path1[1];
        else if(j&lt;0) return path2[1];
        if(path1[i]&lt;path2[j])return path1[1];
        else if(path1[i]&gt;path2[j])
        return path2[1];
    }


}
void Dijkstra(int n,int v,int t,int *dist,int *prev,int c[maxnum][maxnum],int *b)
{
    bool s[maxnum];
    for(int i=1;i&lt;=n;i++)
    {
        s[i] = 0;
        dist[i] = c[v][i];
        if(dist[i]==int_max)
            prev[i]=0;
        else
            prev[i]=v;
    }
    dist[v] =0;
    s[v] =1;
    for(int i=1;i&lt;=n;i++)
    {
        int min = int_max;
        int u = v;
        for(int j=1;j&lt;=n;j++)
        {
            if(!s[j]&amp;&amp;dist[j]&lt;min)
                {
                    min = dist[j];
                    u = j;
                }
        }
        s[u]=1;
        for(int j=1;j&lt;=n;j++)
        {
            if(c[u][j]==int_max)continue;
            
            int newint=b[u]+dist[u]+c[u][j];
            if(!s[j]&amp;&amp;newint&lt;dist[j])
            {
                dist[j]=newint;
                prev[j]= u;
            }
            else if(!s[j]&amp;&amp;newint==dist[j])
                   prev[j]= com(j,v,prev[j],u);
        }
    }
    int path[maxnum];
   	int k = 1;
	path[k++]=t;
	int tmp = prev[t];
	
	while(tmp != v){
		
		path[k++] = tmp;	
		tmp = prev[tmp];
	}
	path[k] = v;
	for(int i=k ;i&gt;1;i--){
		printf(&quot;%d--&gt;&quot;,path[i]);
	}printf(&quot;%d\n&quot;,path[1]);
    
}

int main()
{
	int i,j,ss,t,r;
	while(scanf(&quot;%d&quot;,&amp;n),n)
	{
		for(i=1;i&lt;=n;i++){
			for(j=1;j&lt;=n;j++){		
				scanf(&quot;%d&quot;,&amp;r);
				if(r==-1){
					c[i][j] =int_max;
				}
				else c[i][j] = r;
			}
		}
		for(i=1;i&lt;=n;i++) scanf(&quot;%d&quot;,&amp;b[i]);
		while(scanf(&quot;%d%d&quot;,&amp;ss,&amp;t),(ss!=-1&amp;&amp;t!=-1)){
			printf(&quot;From %d to %d :\nPath: &quot;,ss,t);
			if(ss==t) {
				printf(&quot;%d\nTotal cost : 0\n\n&quot;,ss);
			}
			else{		
				Dijkstra(n,ss,t,dist,prev,c,b);
				printf(&quot;Total cost : %d\n\n&quot;,dist[t]);
			}
				
		}
	}
	return 0;
} 
</pre>
<p><br>
&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://hanks.xyz/2013/08/20/hdu_题目1385_Minimum_Transport_Cost_（最短路径，路径保存及筛选）/" data-id="cihw23pel004wpi054f4typdj" class="article-share-link">Share</a>
      
      
    </footer>
  
  
</article>

  
<section id="comments">
    <!-- 多说分享框 -->
    <div class="ds-share flat" data-thread-key="/2013/08/20/hdu_题目1385_Minimum_Transport_Cost_（最短路径，路径保存及筛选）/" data-title="hdu 题目1385 Minimum Transport Cost （最短路径，路径保存及筛选）" data-images="此处请替换为分享时显示的图片的链接地址" data-content="hdu 题目1385 Minimum Transport Cost （最短路径，路径保存及筛选）" data-url="http://hanks.xyz//2013/08/20/hdu_题目1385_Minimum_Transport_Cost_（最短路径，路径保存及筛选）/">
    <div class="ds-share-inline">
      <ul  class="ds-share-icons-16">

      	<li data-toggle="ds-share-icons-more"><a class="ds-more" href="javascript:void(0);">分享到：</a></li>
        <li><a class="ds-weibo" href="javascript:void(0);" data-service="weibo">微博</a></li>
        <li><a class="ds-qzone" href="javascript:void(0);" data-service="qzone">QQ空间</a></li>
        <li><a class="ds-qqt" href="javascript:void(0);" data-service="qqt">腾讯微博</a></li>
        <li><a class="ds-wechat" href="javascript:void(0);" data-service="wechat">微信</a></li>
      </ul>
      <div class="ds-share-icons-more">
      </div>
    </div>
   </div>
    <!-- 多说评论框 start -->
   	<div class="ds-thread" data-thread-key="/2013/08/20/hdu_题目1385_Minimum_Transport_Cost_（最短路径，路径保存及筛选）/" data-title="hdu 题目1385 Minimum Transport Cost （最短路径，路径保存及筛选）" data-url="http://hanks.xyz//2013/08/20/hdu_题目1385_Minimum_Transport_Cost_（最短路径，路径保存及筛选）/"></div>
   <!-- 多说评论框 end -->
   <!-- 多说公共JS代码 start (一个网页只需插入一次) -->
   <script type="text/javascript">
   var duoshuoQuery = {short_name:"hanks-zyh"};
   	(function() {
   		var ds = document.createElement('script');
   		ds.type = 'text/javascript';ds.async = true;
   		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
   		ds.charset = 'UTF-8';
   		(document.getElementsByTagName('head')[0]
   		 || document.getElementsByTagName('body')[0]).appendChild(ds);
   	})();
   	</script>
   <!-- 多说公共JS代码 end -->
</section>

</section>
      </div>
      <footer id="footer">
  
    <aside id="sidebar" class="outer">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/12/06/rx_thread/">Rx中的线程切换</a>
          </li>
        
          <li>
            <a href="/2015/12/04/mac_java_enviroment/">OS X中Java环境变量配置</a>
          </li>
        
          <li>
            <a href="/2015/12/02/mac-os-in-Ubuntu/">Ubuntu 安装 OS X 10.11  虚拟机</a>
          </li>
        
          <li>
            <a href="/2015/12/01/ReactiveX/">ReactiveX</a>
          </li>
        
          <li>
            <a href="/2015/11/29/rx_ux/">使用RxJava 提升用户体验</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Java/" style="font-size: 13.33px;">Java</a> <a href="/tags/OS-X/" style="font-size: 10px;">OS X</a> <a href="/tags/Rx/" style="font-size: 10px;">Rx</a> <a href="/tags/RxJava/" style="font-size: 10px;">RxJava</a> <a href="/tags/Rxandroid/" style="font-size: 10px;">Rxandroid</a> <a href="/tags/Rxjava/" style="font-size: 10px;">Rxjava</a> <a href="/tags/Ubuntu/" style="font-size: 16.67px;">Ubuntu</a> <a href="/tags/mac-os/" style="font-size: 10px;">mac os</a> <a href="/tags/virtualBox/" style="font-size: 10px;">virtualBox</a> <a href="/tags/必备知识/" style="font-size: 10px;">必备知识</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">links</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="http://kiya.space">kiya-z</a>
          </li>
        
          <li>
            <a href="http://hexo.io">Hexo</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
  
  <div class="outer footer_center">
    <div id="footer-info" class="inner">
      &copy; 2015 Hanks<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
  </br>
<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<span id="busuanzi_container_site_pv">总访问量<span id="busuanzi_value_site_pv"></span>次</span>
    </div>
  </div>
</footer>

    </div>
    

<script src="/js/jquery.min.js" type="text/javascript"></script>
<script src="/js/jquery.scrollLoading.js" type="text/javascript"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>