<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>hdu 题目1385 Minimum Transport Cost （最短路径，路径保存及筛选） | Hanks&#39; Websit</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <script data-ad-client="ca-pub-8165670162444117" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <meta name="referrer" content="never">
  <meta name="description" content="Minimum Transport Cost  Time Limit : 2000&#x2F;1000ms (Java&#x2F;Other)&nbsp;&nbsp;&nbsp;Memory Limit : 65536&#x2F;32768K (Java&#x2F;Other) Total Submission(s) : 19&nbsp;&nbsp;&nbsp;Accepted Submission(s) : 7 Problem De">
<meta property="og:type" content="article">
<meta property="og:title" content="hdu 题目1385 Minimum Transport Cost （最短路径，路径保存及筛选）">
<meta property="og:url" content="https://hanks.pub/2013/08/20/hdu_%E9%A2%98%E7%9B%AE1385_Minimum_Transport_Cost_%EF%BC%88%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%EF%BC%8C%E8%B7%AF%E5%BE%84%E4%BF%9D%E5%AD%98%E5%8F%8A%E7%AD%9B%E9%80%89%EF%BC%89/index.html">
<meta property="og:site_name" content="Hanks&#39; Websit">
<meta property="og:description" content="Minimum Transport Cost  Time Limit : 2000&#x2F;1000ms (Java&#x2F;Other)&nbsp;&nbsp;&nbsp;Memory Limit : 65536&#x2F;32768K (Java&#x2F;Other) Total Submission(s) : 19&nbsp;&nbsp;&nbsp;Accepted Submission(s) : 7 Problem De">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2013-08-20T13:35:00.000Z">
<meta property="article:modified_time" content="2024-02-08T01:29:02.185Z">
<meta property="article:author" content="Hanks">
<meta name="twitter:card" content="summary">
  
  
  <link href="https://fonts.googleapis.com/css?family=Fira+Code|Noto+Serif+SC&display=swap" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

  

<meta name="generator" content="Hexo 7.1.1"></head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8165670162444117"
     crossorigin="anonymous"></script>
  <div id="header-outer" class="outer">
    <a href="/" class="logo"></a>
    <nav id="main-nav">
      <a id="main-nav-toggle" class="nav-icon"></a>
      
        <a class="main-nav-link" href="/archives">Archive</a>
      
        <a class="main-nav-link" href="/eye-video">Eye</a>
      
        <a class="main-nav-link" href="/atom.xml">Rss</a>
      
    </nav>
  </div>
</header>
      <nav id="mobile-nav" class="off">
  
    <a href="/archives" class="mobile-nav-link">Archive</a>
  
    <a href="/eye-video" class="mobile-nav-link">Eye</a>
  
    <a href="/atom.xml" class="mobile-nav-link">Rss</a>
  
</nav>
      <div class="outer">
        <section id="main"><article id="post-hdu_题目1385_Minimum_Transport_Cost_（最短路径，路径保存及筛选）" class="article article-type-post" itemscope
  itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
    <header class="article-header">
      
      
  
    <h1 class="article-title" itemprop="name">
      hdu 题目1385 Minimum Transport Cost （最短路径，路径保存及筛选）
    </h1>
  

      
    </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      
<h1 align="center"><span style="color:#3366ff">Minimum Transport Cost </span></h1>
<h5 align="center"><span style="color:#009900">Time Limit : 2000/1000ms (Java/Other)&nbsp;&nbsp;&nbsp;Memory Limit : 65536/32768K (Java/Other)</span></h5>
<h5 align="center"><span style="color:#009900">Total Submission(s) : 19&nbsp;&nbsp;&nbsp;Accepted Submission(s) : 7</span></h5>
<h3 align="left">Problem Description</h3>
<div>These are N cities in Spring country. Between each pair of cities there may be one transportation track or none. Now there is some cargo that should be delivered from one city to another. The transportation fee consists of two parts:
<br>
The cost of the transportation on the path between these cities, and<br>
<br>
a certain tax which will be charged whenever any cargo passing through one city, except for the source and the destination cities.<br>
<br>
You must write a program to find the route which has the minimum cost.<br>
</div>
<h3>Input</h3>
<div id="proinput">First is N, number of cities. N = 0 indicates the end of input.<br>
<br>
The data of path cost, city tax, source and destination cities are given in the input, which is of the form:<br>
<br>
a11 a12 ... a1N<br>
a21 a22 ... a2N<br>
...............<br>
aN1 aN2 ... aNN<br>
b1 b2 ... bN<br>
<br>
c d<br>
e f<br>
...<br>
g h<br>
<br>
where aij is the transport cost from city i to city j, aij = -1 indicates there is no direct path between city i and city j. bi represents the tax of passing through city i. And the cargo is to be delivered from city c to city d, city e to city f, ..., and
 g = h = -1. You must output the sequence of cities passed by and the total cost which is of the form:<br>
</div>
<h3>Output</h3>
<div id="prooutput">From c to d :<br>
Path: c--&gt;c1--&gt;......--&gt;ck--&gt;d<br>
Total cost : ......<br>
......<br>
<br>
From e to f :<br>
Path: e--&gt;e1--&gt;..........--&gt;ek--&gt;f<br>
Total cost : ......<br>
<br>
Note: if there are more minimal paths, output the lexically smallest one. Print a blank line after each test case.<br>
<br>
</div>
<h3>Sample Input</h3>
<div id="prosamplein">
<pre>5
0 3 22 -1 4
3 0 5 -1 -1
22 5 0 9 20
-1 -1 9 0 4
4 -1 20 4 0
5 17 8 3 1
1 3
3 5
2 4
-1 -1
0
</pre>
</div>
<h3>Sample Output</h3>
<div id="prosampleout">
<pre>From 1 to 3 :
Path: 1--&gt;5--&gt;4--&gt;3
Total cost : 21

From 3 to 5 :
Path: 3--&gt;4--&gt;5
Total cost : 16

From 2 to 4 :
Path: 2--&gt;1--&gt;5--&gt;4
Total cost : 17
</pre>
</div>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>需要注意保存路径时，当当有两个最短路径冲突时，要进行筛选路径</p>
<p>最短路径用的Dijkstra 算法，</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<pre class="cpp" name="code">#include&lt;iostream&gt;
#include&lt;stdio.h&gt;
#include&lt;string.h&gt;
#include&lt;stdlib.h&gt;
#include&lt;algorithm&gt;
#define maxnum 10000
#define int_max 999999



using namespace std;
int dist[maxnum];
int prev[maxnum];
int b[maxnum];
int c[maxnum][maxnum];
int n,can;

int com(int cur,int v,int a,int b)//筛选路径
{
    int path1[maxnum];
    int path2[maxnum];
    path1[0]=cur;
    path2[0]=cur;
    int i=2,j=2;
    path1[1]=a;
    path2[1]=b;
    while(a!=v)
    {
        path1[i++]=prev[a];
        a = prev[a];
    }
    while(b!=v)
    {
        path2[j++]=prev[b];
        b= prev[b];
    }
    while(1)
    {
         i--,j--;
        if(i&lt;0) return path1[1];
        else if(j&lt;0) return path2[1];
        if(path1[i]&lt;path2[j])return path1[1];
        else if(path1[i]&gt;path2[j])
        return path2[1];
    }


}
void Dijkstra(int n,int v,int t,int *dist,int *prev,int c[maxnum][maxnum],int *b)
{
    bool s[maxnum];
    for(int i=1;i&lt;=n;i++)
    {
        s[i] = 0;
        dist[i] = c[v][i];
        if(dist[i]==int_max)
            prev[i]=0;
        else
            prev[i]=v;
    }
    dist[v] =0;
    s[v] =1;
    for(int i=1;i&lt;=n;i++)
    {
        int min = int_max;
        int u = v;
        for(int j=1;j&lt;=n;j++)
        {
            if(!s[j]&amp;&amp;dist[j]&lt;min)
                {
                    min = dist[j];
                    u = j;
                }
        }
        s[u]=1;
        for(int j=1;j&lt;=n;j++)
        {
            if(c[u][j]==int_max)continue;
            
            int newint=b[u]+dist[u]+c[u][j];
            if(!s[j]&amp;&amp;newint&lt;dist[j])
            {
                dist[j]=newint;
                prev[j]= u;
            }
            else if(!s[j]&amp;&amp;newint==dist[j])
                   prev[j]= com(j,v,prev[j],u);
        }
    }
    int path[maxnum];
   	int k = 1;
	path[k++]=t;
	int tmp = prev[t];
	
	while(tmp != v){
		
		path[k++] = tmp;	
		tmp = prev[tmp];
	}
	path[k] = v;
	for(int i=k ;i&gt;1;i--){
		printf(&quot;%d--&gt;&quot;,path[i]);
	}printf(&quot;%d\n&quot;,path[1]);
    
}

int main()
{
	int i,j,ss,t,r;
	while(scanf(&quot;%d&quot;,&amp;n),n)
	{
		for(i=1;i&lt;=n;i++){
			for(j=1;j&lt;=n;j++){		
				scanf(&quot;%d&quot;,&amp;r);
				if(r==-1){
					c[i][j] =int_max;
				}
				else c[i][j] = r;
			}
		}
		for(i=1;i&lt;=n;i++) scanf(&quot;%d&quot;,&amp;b[i]);
		while(scanf(&quot;%d%d&quot;,&amp;ss,&amp;t),(ss!=-1&amp;&amp;t!=-1)){
			printf(&quot;From %d to %d :\nPath: &quot;,ss,t);
			if(ss==t) {
				printf(&quot;%d\nTotal cost : 0\n\n&quot;,ss);
			}
			else{		
				Dijkstra(n,ss,t,dist,prev,c,b);
				printf(&quot;Total cost : %d\n\n&quot;,dist[t]);
			}
				
		}
	}
	return 0;
} 
</pre>
<p><br>
&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>

      
    </div>
</article>

<!-- 上一页 下一页 -->


<nav id="article-nav">
  
    <a href="/2013/08/21/hdu_%E9%A2%98%E7%9B%AE_%EF%BC%88%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91_prim%E7%AE%97%E6%B3%95%EF%BC%89/" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="fa fa-chevron-left"></i><span>上一篇</span>
      <div class="article-nav-title">
        
          hdu 题目 （最小生成树 prim算法）
        
      </div>
    </a>
  
  
    <a href="/2013/08/20/hdu_%E9%A2%98%E7%9B%AE2122_HDU_Today_%EF%BC%88%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%EF%BC%8CDijkstra%EF%BC%89/" id="article-nav-older" class="article-nav-link-wrap">
      <i class="fa fa-chevron-left"></i><span>下一篇</span>
      <div class="article-nav-title">hdu 题目2122 HDU Today （最短路径，Dijkstra）</div>
    </a>
  
</nav>



<!-- 相关文章 -->

<!--

-->


</section>
      </div>
      <footer id="footer">
  <div class="outer footer_center">
    <div id="footer-info" class="inner">
      
      &copy;2025<a target="_blank" rel="noopener" href="https://github.com/hanks-zyh"> Hanks</a>版权所有
      <br/>
      <a href="https://beian.miit.gov.cn/" target="_blank">豫ICP备2021022347号</a>
	  </div>
  </div>
 <div id="share">
  <a id="totop" title="" style="display: block;">返回顶部</a>
 </div>
</footer>

    </div>
    


<script src="/js/jquery.min.js"></script>


<script src="/js/jquery.scrollLoading.js"></script>





<script src="/js/script.js"></script>


<script src="/js/ads.js"></script>

  </div>
</body>
</html>
