<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>一步一步实现500px引导动画 -- 酷酷哒 | Hanks&#39; Websit</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <script data-ad-client="ca-pub-8165670162444117" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <meta name="referrer" content="never">
  <meta name="description" content="一步一步实现500px引导动画 – 酷酷哒 转载请注明出处 : https:&#x2F;&#x2F;blog.csdn.net&#x2F;hpu_zyh&#x2F;article&#x2F;details&#x2F;47749859 博客主页  |   简书  |  知乎  |  微博  |  github  下了500px应用, 瞬间被它的引导动画吸引住了,下面一步一步来实现引导动画 最终效果图:     清晰版  下面的小圆点简单的,就先省略,重点在切">
<meta property="og:type" content="article">
<meta property="og:title" content="一步一步实现500px引导动画 -- 酷酷哒">
<meta property="og:url" content="https://hanks.pub/2015/08/18/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E5%AE%9E%E7%8E%B0500px%E5%BC%95%E5%AF%BC%E5%8A%A8%E7%94%BB_--_%E9%85%B7%E9%85%B7%E5%93%92/index.html">
<meta property="og:site_name" content="Hanks&#39; Websit">
<meta property="og:description" content="一步一步实现500px引导动画 – 酷酷哒 转载请注明出处 : https:&#x2F;&#x2F;blog.csdn.net&#x2F;hpu_zyh&#x2F;article&#x2F;details&#x2F;47749859 博客主页  |   简书  |  知乎  |  微博  |  github  下了500px应用, 瞬间被它的引导动画吸引住了,下面一步一步来实现引导动画 最终效果图:     清晰版  下面的小圆点简单的,就先省略,重点在切">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://file.bmob.cn/M01/09/67/oYYBAFXS0giAVZ_yAFK58BsXp6I373.gif">
<meta property="og:image" content="https://file.bmob.cn/M01/09/76/oYYBAFXS1AeADqx8AERLXngnTHk663.gif">
<meta property="og:image" content="https://img.blog.csdn.net/20150818114547069">
<meta property="og:image" content="https://img.blog.csdn.net/20150818114332478">
<meta property="og:image" content="https://img.blog.csdn.net/20150818114914483">
<meta property="og:image" content="https://img.blog.csdn.net/20150818115006696">
<meta property="og:image" content="https://img.blog.csdn.net/20150818115021583">
<meta property="og:image" content="https://img.blog.csdn.net/20150818115031865">
<meta property="og:image" content="https://img.blog.csdn.net/20150818132835708">
<meta property="og:image" content="https://img.blog.csdn.net/20150818133033145">
<meta property="og:image" content="https://img.blog.csdn.net/20150818133956984">
<meta property="article:published_time" content="2015-08-18T06:30:00.000Z">
<meta property="article:modified_time" content="2024-02-08T01:29:02.195Z">
<meta property="article:author" content="Hanks">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://file.bmob.cn/M01/09/67/oYYBAFXS0giAVZ_yAFK58BsXp6I373.gif">
  
  
  <link href="https://fonts.googleapis.com/css?family=Fira+Code|Noto+Serif+SC&display=swap" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

  

<meta name="generator" content="Hexo 7.1.1"></head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8165670162444117"
     crossorigin="anonymous"></script>
  <div id="header-outer" class="outer">
    <a href="/" class="logo"></a>
    <nav id="main-nav">
      <a id="main-nav-toggle" class="nav-icon"></a>
      
        <a class="main-nav-link" href="/archives">Archive</a>
      
        <a class="main-nav-link" href="/eye-video">Eye</a>
      
        <a class="main-nav-link" href="/atom.xml">Rss</a>
      
    </nav>
  </div>
</header>
      <nav id="mobile-nav" class="off">
  
    <a href="/archives" class="mobile-nav-link">Archive</a>
  
    <a href="/eye-video" class="mobile-nav-link">Eye</a>
  
    <a href="/atom.xml" class="mobile-nav-link">Rss</a>
  
</nav>
      <div class="outer">
        <section id="main"><article id="post-一步一步实现500px引导动画_--_酷酷哒" class="article article-type-post" itemscope
  itemprop="blogPost">
  <div class="article-meta">
    
  </div>
  <div class="article-inner">
    
    
    <header class="article-header">
      
      
  
    <h1 class="article-title" itemprop="name">
      一步一步实现500px引导动画 -- 酷酷哒
    </h1>
  

      
    </header>
    
    <div class="article-entry" itemprop="articleBody">
      
      <h1 id="一步一步实现500px引导动画-–-酷酷哒"><a href="#一步一步实现500px引导动画-–-酷酷哒" class="headerlink" title="一步一步实现500px引导动画 – 酷酷哒"></a>一步一步实现500px引导动画 – 酷酷哒</h1><blockquote>
<p>转载请注明出处 : <a target="_blank" rel="noopener" href="https://blog.csdn.net/hpu_zyh/article/details/47749859">https://blog.csdn.net/hpu_zyh/article/details/47749859</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/hpu_zyh">博客主页</a>  |   <a target="_blank" rel="noopener" href="https://www.jianshu.com/users/3e9f552e6ba7">简书</a>  |  <a target="_blank" rel="noopener" href="https://www.zhihu.com/people/yuhan-zhang-36">知乎</a>  |  <a target="_blank" rel="noopener" href="https://weibo.com/u/2359002991">微博</a>  |  <a target="_blank" rel="noopener" href="https://github.com/hanks-zyh">github</a></p>
</blockquote>
<p>下了500px应用, 瞬间被它的引导动画吸引住了,下面一步一步来实现引导动画</p>
<h2 id="最终效果图"><a href="#最终效果图" class="headerlink" title="最终效果图:"></a>最终效果图:</h2><p><img src="https://file.bmob.cn/M01/09/67/oYYBAFXS0giAVZ_yAFK58BsXp6I373.gif">   </p>
<hr>
<p>清晰版<br> <img src="https://file.bmob.cn/M01/09/76/oYYBAFXS1AeADqx8AERLXngnTHk663.gif"></p>
<p>下面的小圆点简单的,就先省略,重点在切换动画</p>
<hr>
<h3 id="创建viewpager"><a href="#创建viewpager" class="headerlink" title="创建viewpager"></a>创建viewpager</h3><p>可以左右随手指滑动的只有底部文字部分,所以ViewPager中存放的布局是底部文字部分<br><code>activity_main.xml</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;RelativeLayout xmlns:android=&quot;https://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    android:background=&quot;#fff&quot;&gt;</span><br><span class="line">    &lt;android.support.v4.view.ViewPager</span><br><span class="line">        android:id=&quot;@+id/viewpager&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot; /&gt;</span><br><span class="line">&lt;/RelativeLayout&gt;</span><br></pre></td></tr></table></figure>
<p>先添加viewpager控件</p>
<p><code>MainActivity.java</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//创建adapter</span><br><span class="line">GuideAdapter adapter = new GuideAdapter(getFragmentManager());</span><br><span class="line">//设置viewpager缓存页数,默认的缓存一页,因为引导页共有4页,</span><br><span class="line">//所以设置缓存3页,这样所以page在滑动过程中不会重新创建</span><br><span class="line">viewpager.setOffscreenPageLimit(3);</span><br><span class="line">viewpager.setAdapter(adapter);</span><br></pre></td></tr></table></figure>
<p>在<code>MainActivity</code>中,首先获取到xml中的viewpager,为viewpager设置Adapter,并且设置viewpage的缓存页数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private List&lt;Fragment&gt; fragmentList = new ArrayList&lt;&gt;();</span><br></pre></td></tr></table></figure>
<p>创建了用于填充viewpager的fragmentList</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fragment00 = new GuideFragment();</span><br><span class="line">fragment01 = new GuideFragment();</span><br><span class="line">fragment02 = new GuideFragment();</span><br><span class="line">fragment03 = new GuideFragment();</span><br><span class="line"></span><br><span class="line">fragmentList.add(fragment00);</span><br><span class="line">fragmentList.add(fragment01);</span><br><span class="line">fragmentList.add(fragment02);</span><br><span class="line">fragmentList.add(fragment03);</span><br></pre></td></tr></table></figure>
<p>初始化fragmentList</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class GuideAdapter extends FragmentPagerAdapter &#123;</span><br><span class="line">       public GuideAdapter(FragmentManager fm) &#123;</span><br><span class="line">           super(fm);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       @Override</span><br><span class="line">       public Fragment getItem(int position) &#123;</span><br><span class="line">           return fragmentList.get(position);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       @Override</span><br><span class="line">       public int getCount() &#123;</span><br><span class="line">           return fragmentList.size();</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>GuideAdapter 继承FragmentPagerAdapter</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Created by Hanks on 2015/8/13.</span><br><span class="line"> */</span><br><span class="line">public class GuideFragment extends Fragment &#123;</span><br><span class="line">    @Nullable</span><br><span class="line">    @Override</span><br><span class="line">    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) &#123;</span><br><span class="line">        View view = inflater.inflate(R.layout.fragment_guide, container, false);</span><br><span class="line">        return view;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在Fragment中只是展示了一下布局<br><img src="https://img.blog.csdn.net/20150818114547069" alt="这里写图片描述"></p>
<p>运行效果<br> <img src="https://img.blog.csdn.net/20150818114332478" alt="这里写图片描述"></p>
<hr>
<p>##开始引导动画</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//给viewpager设置Pagetransformer</span><br><span class="line">viewpager.setPageTransformer(false, new HKTransformer());</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * by Hanks</span><br><span class="line"> */</span><br><span class="line">class HKTransformer implements ViewPager.PageTransformer &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void transformPage(View view, float position) &#123;</span><br><span class="line">        Log.i(&quot;&quot;, &quot;view:    &quot; + view + &quot;position= &quot; + position);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>观察滑动过程中<strong>view</strong>和<strong>position</strong>的值</p>
<p>从第0页到第1页,<br><img src="https://img.blog.csdn.net/20150818114914483" alt="这里写图片描述"></p>
<p><img src="https://img.blog.csdn.net/20150818115006696" alt="这里写图片描述"><br>可以看到4个页面的对应的position 从 0, 1, 2, 3 变化为 -1, 0, 1, 2</p>
<p>然后从第1页滑动到第2页<br><img src="https://img.blog.csdn.net/20150818115021583" alt="这里写图片描述"></p>
<p><img src="https://img.blog.csdn.net/20150818115031865" alt="这里写图片描述"><br>可以看到4个页面的对应的position 从 -1, 0, 1, 2 变化为 -2, -1, 0, 1</p>
<p>继续观察可以看到其中的规律,这里不再贴出图片了.</p>
<p>###观察滑动规律<br>假设4个页面分别为A,B,C,D<br>只看第0个页面</p>
<ul>
<li>从 A-B,  position:  0 ~ -1</li>
<li>从 B-C,  position: -1 ~ -2</li>
<li>从 C-D,  position: -2 ~ -3</li>
</ul>
<p>所以可以以其中一个view的position为标准来确定当前滑动的是哪个页面</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * by Hanks</span><br><span class="line"> */</span><br><span class="line">class HKTransformer implements ViewPager.PageTransformer &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void transformPage(View view, float position) &#123;</span><br><span class="line">        if (fragment00.getView() == view) &#123;</span><br><span class="line">            Log.i(&quot;&quot;, &quot;view:    &quot; + view + &quot;position= &quot; + position);</span><br><span class="line">            currentPosition = position;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        if (position &lt; -1) &#123; // [-Infinity,-1)</span><br><span class="line">            // This page is way off-screen to the left.</span><br><span class="line">        &#125; else if (position &lt;= 0) &#123; // [-1,0]</span><br><span class="line">            // Use the default slide transition when moving to the left page</span><br><span class="line">        &#125; else if (position &lt;= 1) &#123; // (0,1]</span><br><span class="line">            // Fade the page out.</span><br><span class="line"></span><br><span class="line">            float p = Math.abs(position);</span><br><span class="line">            float f = (1 - p);</span><br><span class="line"></span><br><span class="line">            Log.i(&quot;&quot;, &quot;p= &quot; + p);</span><br><span class="line">            // p : 1~0</span><br><span class="line">            // f : 0~1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            if (-1 &lt; currentPosition &amp;&amp; currentPosition &lt;= 0) &#123;</span><br><span class="line">               // A ~ B 之间的动画</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125; else if (-2 &lt; currentPosition &amp;&amp; currentPosition &lt;= -1) &#123;</span><br><span class="line">                //B ~  C 之间的动画</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125; else if (-3 &lt; currentPosition &amp;&amp; currentPosition &lt;= -2) &#123;</span><br><span class="line">                //C ~  D 之间的动画</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; else &#123; // (1,+Infinity]</span><br><span class="line">            // This page is way off-screen to the right.</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 在position处于**(0,1]<strong>时,表示两个页面正在滑动切换,可以打印一下看看,然后就是基于上面的规律, 根据</strong>currentPosition**来判断是从在哪两个页面之间滑动</p>
<p>###开始动画</p>
<p>####A~B界面的动画</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;RelativeLayout xmlns:android=&quot;https://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    android:background=&quot;#fff&quot;&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;ImageView</span><br><span class="line">        android:id=&quot;@+id/iv_device&quot;</span><br><span class="line">        android:layout_width=&quot;340dp&quot;</span><br><span class="line">        android:layout_height=&quot;500dp&quot;</span><br><span class="line">        android:layout_centerInParent=&quot;true&quot;</span><br><span class="line">        android:scaleType=&quot;centerInside&quot;</span><br><span class="line">        android:src=&quot;@drawable/tour_device&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;ImageView</span><br><span class="line">        android:id=&quot;@+id/iv_initial_phone&quot;</span><br><span class="line">        android:layout_width=&quot;200dp&quot;</span><br><span class="line">        android:layout_height=&quot;400dp&quot;</span><br><span class="line">        android:layout_centerInParent=&quot;true&quot;</span><br><span class="line">        android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">        android:src=&quot;@drawable/tour_initial_photo&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;android.support.v4.view.ViewPager</span><br><span class="line">        android:id=&quot;@+id/viewpager&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;&gt;&lt;/android.support.v4.view.ViewPager&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/RelativeLayout&gt;</span><br></pre></td></tr></table></figure>
<p>一个手机边框 :</p>
<ul>
<li><strong>scaleX : 1 ~ 2</strong></li>
<li><strong>alpha : 1 ~ 0</strong></li>
</ul>
<p>中间”大人小孩”图片 :<br> <strong>scaleX : 1 ~ 0.5</strong><br> <strong>scaleY : 1 ~ 0.5</strong><br> <strong>translationY: 0 ~ -600</strong></p>
<p>评论模块:<br><strong>scaleX : 2 ~ 1</strong><br> <strong>scaleY : 2 ~ 1</strong><br> <strong>translationY: 800 ~ 0</strong><br> <strong>alpha :  ~ 1</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">iv_initial_phone.setTranslationY(-600 * f);</span><br><span class="line">iv_initial_phone.setScaleX(0.5f * p + 0.5f);</span><br><span class="line">iv_initial_phone.setScaleY(0.5f * p + 0.5f);</span><br><span class="line">iv_device.setScaleX(1 + 2 * f);</span><br><span class="line"></span><br><span class="line">//仔细观察iv_device是在滑到中间时就完全alpha=0了</span><br><span class="line">if (p &gt; 0.5 &amp;&amp; p &lt;= 1) &#123;</span><br><span class="line">    iv_device.setAlpha(2 * p - 1);</span><br><span class="line">&#125; else &#123;</span><br><span class="line">    iv_device.setAlpha(0f);</span><br><span class="line">&#125;</span><br><span class="line">ll_comments.setTranslationY(800 * p);</span><br><span class="line">ll_comments.setAlpha(f);</span><br><span class="line">ll_comments.setScaleX(2 - f);</span><br><span class="line">ll_comments.setScaleY(2 - f);</span><br></pre></td></tr></table></figure>
<p>运行效果<br><img src="https://img.blog.csdn.net/20150818132835708" alt="这里写图片描述"></p>
<p>####B~C界面的动画<br>布局文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line">&lt;RelativeLayout xmlns:android=&quot;https://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    android:background=&quot;#fff&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;LinearLayout</span><br><span class="line">        android:id=&quot;@+id/ll_comments&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">        android:layout_centerInParent=&quot;true&quot;</span><br><span class="line">        android:orientation=&quot;vertical&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:layout_width=&quot;200dp&quot;</span><br><span class="line">            android:layout_height=&quot;63dp&quot;</span><br><span class="line">            android:layout_gravity=&quot;right&quot;</span><br><span class="line">            android:drawableLeft=&quot;@drawable/tour_avatar1&quot;</span><br><span class="line">            android:drawablePadding=&quot;8dp&quot;</span><br><span class="line">            android:gravity=&quot;center_vertical|left&quot;</span><br><span class="line">            android:text=&quot;Kaitlyn 收藏了\n您的照片\n刚刚&quot;</span><br><span class="line">            android:textColor=&quot;#111&quot;</span><br><span class="line">            android:textSize=&quot;14sp&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:layout_width=&quot;200dp&quot;</span><br><span class="line">            android:layout_height=&quot;63dp&quot;</span><br><span class="line">            android:layout_gravity=&quot;left&quot;</span><br><span class="line">            android:drawablePadding=&quot;8dp&quot;</span><br><span class="line">            android:drawableRight=&quot;@drawable/tour_avatar2&quot;</span><br><span class="line">            android:gravity=&quot;center_vertical|right&quot;</span><br><span class="line">            android:text=&quot;Adam 评论了\n您的照片\n刚刚&quot;</span><br><span class="line">            android:textColor=&quot;#111&quot;</span><br><span class="line">            android:textSize=&quot;14sp&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:layout_width=&quot;200dp&quot;</span><br><span class="line">            android:layout_height=&quot;63dp&quot;</span><br><span class="line">            android:layout_gravity=&quot;right&quot;</span><br><span class="line">            android:drawableLeft=&quot;@drawable/tour_avatar3&quot;</span><br><span class="line">            android:drawablePadding=&quot;8dp&quot;</span><br><span class="line">            android:gravity=&quot;center_vertical|left&quot;</span><br><span class="line">            android:text=&quot;Kaitlyn 收藏了\n您的照片\n刚刚&quot;</span><br><span class="line">            android:textColor=&quot;#111&quot;</span><br><span class="line">            android:textSize=&quot;14sp&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:layout_width=&quot;200dp&quot;</span><br><span class="line">            android:layout_height=&quot;63dp&quot;</span><br><span class="line">            android:layout_gravity=&quot;left&quot;</span><br><span class="line">            android:drawablePadding=&quot;8dp&quot;</span><br><span class="line">            android:drawableRight=&quot;@drawable/tour_avatar4&quot;</span><br><span class="line">            android:gravity=&quot;right|center_vertical&quot;</span><br><span class="line">            android:text=&quot;Adam 评论了\n您的照片\n刚刚&quot;</span><br><span class="line">            android:textColor=&quot;#111&quot;</span><br><span class="line">            android:textSize=&quot;14sp&quot; /&gt;</span><br><span class="line">    &lt;/LinearLayout&gt;</span><br><span class="line">    &lt;LinearLayout</span><br><span class="line">        android:id=&quot;@+id/ll_rows&quot;</span><br><span class="line">        android:layout_width=&quot;600dp&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;</span><br><span class="line">        android:layout_centerHorizontal=&quot;true&quot;</span><br><span class="line">        android:gravity=&quot;center_horizontal&quot;</span><br><span class="line">        android:orientation=&quot;vertical&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:layout_width=&quot;600dp&quot;</span><br><span class="line">            android:layout_height=&quot;72dp&quot;</span><br><span class="line">            android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">            android:src=&quot;@drawable/row1&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:layout_width=&quot;600dp&quot;</span><br><span class="line">            android:layout_height=&quot;72dp&quot;</span><br><span class="line">            android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">            android:src=&quot;@drawable/row2&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:layout_width=&quot;843dp&quot;</span><br><span class="line">            android:layout_height=&quot;72dp&quot;</span><br><span class="line">            android:layout_gravity=&quot;center_horizontal&quot;</span><br><span class="line">            android:layout_marginLeft=&quot;5.5dp&quot;</span><br><span class="line">            android:scaleType=&quot;fitXY&quot;</span><br><span class="line">            android:src=&quot;@drawable/row3&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:layout_width=&quot;600dp&quot;</span><br><span class="line">            android:layout_height=&quot;72dp&quot;</span><br><span class="line">            android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">            android:src=&quot;@drawable/row4&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:layout_width=&quot;600dp&quot;</span><br><span class="line">            android:layout_height=&quot;72dp&quot;</span><br><span class="line">            android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">            android:src=&quot;@drawable/row5&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:layout_width=&quot;600dp&quot;</span><br><span class="line">            android:layout_height=&quot;72dp&quot;</span><br><span class="line">            android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">            android:src=&quot;@drawable/row6&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:layout_width=&quot;600dp&quot;</span><br><span class="line">            android:layout_height=&quot;72dp&quot;</span><br><span class="line">            android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">            android:src=&quot;@drawable/row7&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:layout_width=&quot;600dp&quot;</span><br><span class="line">            android:layout_height=&quot;72dp&quot;</span><br><span class="line">            android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">            android:src=&quot;@drawable/row8&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:layout_width=&quot;600dp&quot;</span><br><span class="line">            android:layout_height=&quot;72dp&quot;</span><br><span class="line">            android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">            android:src=&quot;@drawable/row9&quot; /&gt;</span><br><span class="line">    &lt;/LinearLayout&gt;</span><br><span class="line">    &lt;ImageView</span><br><span class="line">        android:id=&quot;@+id/iv_device&quot;</span><br><span class="line">        android:layout_width=&quot;340dp&quot;</span><br><span class="line">        android:layout_height=&quot;500dp&quot;</span><br><span class="line">        android:layout_centerInParent=&quot;true&quot;</span><br><span class="line">        android:scaleType=&quot;centerInside&quot;</span><br><span class="line">        android:src=&quot;@drawable/tour_device&quot; /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;ImageView</span><br><span class="line">        android:id=&quot;@+id/iv_initial_phone&quot;</span><br><span class="line">        android:layout_width=&quot;200dp&quot;</span><br><span class="line">        android:layout_height=&quot;400dp&quot;</span><br><span class="line">        android:layout_centerInParent=&quot;true&quot;</span><br><span class="line">        android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">        android:src=&quot;@drawable/tour_initial_photo&quot; /&gt;</span><br><span class="line"></span><br><span class="line">    &lt;ImageView</span><br><span class="line">        android:id=&quot;@+id/iv_final_photo&quot;</span><br><span class="line">        android:layout_width=&quot;48dp&quot;</span><br><span class="line">        android:layout_height=&quot;72dp&quot;</span><br><span class="line">        android:layout_centerHorizontal=&quot;true&quot;</span><br><span class="line">        android:layout_marginTop=&quot;144dp&quot;</span><br><span class="line">        android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">        android:src=&quot;@drawable/tour_final_photo&quot; /&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;android.support.v4.view.ViewPager</span><br><span class="line">        android:id=&quot;@+id/viewpager&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;&gt;&lt;/android.support.v4.view.ViewPager&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;/RelativeLayout&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>“大人小孩”图片:<br><strong>translationY : -600 ~ -900</strong></p>
<p>评论模块:<br><strong>alpha : 1 ~ 0</strong></p>
<p>横条图片模块:<br><strong>translationY : -1000 ~ 0</strong><br><strong>alpha : 1 ~ 0.5</strong></p>
<p>横条图片中间图片(这是一个单独的图片,后面的动画用到):<br><strong>translationY : -1000 ~ 0</strong><br><strong>alpha : 0.5 ~ 1</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> iv_initial_phone.setTranslationY(-600 + -300 * f);</span><br><span class="line"></span><br><span class="line">ll_comments.setAlpha(p);</span><br><span class="line"></span><br><span class="line">ll_rows.setTranslationY(-1000 * p);</span><br><span class="line">ll_rows.setAlpha(0.5f + 0.5f * f);</span><br><span class="line"></span><br><span class="line">iv_final_photo.setTranslationY(-1000 * p);</span><br><span class="line">iv_final_photo.setAlpha(0.5f + 0.5f * f);</span><br></pre></td></tr></table></figure>
<p>效果:<br><img src="https://img.blog.csdn.net/20150818133033145" alt="这里写图片描述"></p>
<p>####C~D界面的动画</p>
<p>设置缩放中心点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iv_final_photo.setPivotY(0f);</span><br><span class="line">iv_final_photo.setPivotX(iv_final_photo.getWidth() / 2);</span><br></pre></td></tr></table></figure>

<p>最后图片:<br><strong>scaleX : 1 ~ 3</strong><br><strong>scaleY : 1 ~ 3</strong></p>
<p>横条图片模块<br>*奇数行向右移动, <strong>translationX :  0 ~ -100</strong><br>*偶数行向左移动, <strong>translationX :  0 ~ 100</strong></p>
<p>头像模块:<br><strong>translationY :  -300 ~ 0</strong></p>
<p>注册按钮<br><strong>translationX :  300 ~ 0</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">iv_final_photo.setScaleX(1 + 3 * f); //1~3</span><br><span class="line">iv_final_photo.setScaleY(1 + 3 * f); //1~3</span><br><span class="line"></span><br><span class="line">for (int i = 0; i &lt; ll_rows.getChildCount(); i++) &#123;</span><br><span class="line">   View child = ll_rows.getChildAt(i);</span><br><span class="line">   child.setAlpha(p);</span><br><span class="line">   if (i % 2 == 0) &#123;</span><br><span class="line">       child.setTranslationX(100 * f);</span><br><span class="line">   &#125; else &#123;</span><br><span class="line">       child.setTranslationX(-100 * f);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tv_avatar_you.setTranslationY(-300 + 300 * f);</span><br><span class="line"></span><br><span class="line">tv_register.setTranslationY(300 - 300 * f);</span><br></pre></td></tr></table></figure>
<p>运行结果:<br><img src="https://img.blog.csdn.net/20150818133956984" alt="这里写图片描述"></p>
<hr>
<p>###最后的模糊效果<br>看到一篇<a target="_blank" rel="noopener" href="https://developers.500px.com/2015/03/17/a-blurring-view-for-android.html">博客</a> (<a target="_blank" rel="noopener" href="https://www.devtf.cn/?p=158">中文翻译版</a>)讲解了500px的模糊效果</p>
<p>项目地址:<a target="_blank" rel="noopener" href="https://github.com/500px/500px-android-blur">https://github.com/500px/500px-android-blur</a></p>
<p>在build.gradle中添加</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">renderscriptTargetApi 18</span><br><span class="line">renderscriptSupportModeEnabled true</span><br></pre></td></tr></table></figure>

<p>将BlurringView.java复制到项目目录</p>
<p>使用BlurringView,</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;hanks.com.customview.BlurringView</span><br><span class="line">     android:id=&quot;@+id/blurringView&quot;</span><br><span class="line">     android:layout_width=&quot;match_parent&quot;</span><br><span class="line">     android:layout_height=&quot;150dp&quot;</span><br><span class="line">     android:layout_alignParentBottom=&quot;true&quot;</span><br><span class="line">     app:blurRadius=&quot;11&quot;</span><br><span class="line">     app:downsampleFactor=&quot;6&quot;</span><br><span class="line">     app:overlayColor=&quot;#99FFFFFF&quot;</span><br><span class="line">     &gt;</span><br><span class="line"> &lt;/hanks.com.customview.BlurringView&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">View blurredView = findViewById(R.id.blurredView);</span><br><span class="line">blurringView.setBlurredView(blurredView);</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blurringView.invalidate();</span><br></pre></td></tr></table></figure>
<p>最终的xml:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;RelativeLayout xmlns:android=&quot;https://schemas.android.com/apk/res/android&quot;</span><br><span class="line">    android:layout_width=&quot;match_parent&quot;</span><br><span class="line">    android:layout_height=&quot;match_parent&quot;</span><br><span class="line">    xmlns:app=&quot;https://schemas.android.com/apk/res-auto&quot;</span><br><span class="line">    android:background=&quot;#fff&quot;</span><br><span class="line">    android:orientation=&quot;vertical&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;RelativeLayout</span><br><span class="line">        android:id=&quot;@+id/blurredView&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;LinearLayout</span><br><span class="line">            android:id=&quot;@+id/ll_comments&quot;</span><br><span class="line">            android:layout_width=&quot;match_parent&quot;</span><br><span class="line">            android:layout_height=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_centerInParent=&quot;true&quot;</span><br><span class="line">            android:orientation=&quot;vertical&quot;&gt;</span><br><span class="line"></span><br><span class="line">            &lt;TextView</span><br><span class="line">                android:layout_width=&quot;200dp&quot;</span><br><span class="line">                android:layout_height=&quot;63dp&quot;</span><br><span class="line">                android:layout_gravity=&quot;right&quot;</span><br><span class="line">                android:drawableLeft=&quot;@drawable/tour_avatar1&quot;</span><br><span class="line">                android:drawablePadding=&quot;8dp&quot;</span><br><span class="line">                android:gravity=&quot;center_vertical|left&quot;</span><br><span class="line">                android:text=&quot;Kaitlyn 收藏了\n您的照片\n刚刚&quot;</span><br><span class="line">                android:textColor=&quot;#111&quot;</span><br><span class="line">                android:textSize=&quot;14sp&quot; /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;TextView</span><br><span class="line">                android:layout_width=&quot;200dp&quot;</span><br><span class="line">                android:layout_height=&quot;63dp&quot;</span><br><span class="line">                android:layout_gravity=&quot;left&quot;</span><br><span class="line">                android:drawablePadding=&quot;8dp&quot;</span><br><span class="line">                android:drawableRight=&quot;@drawable/tour_avatar2&quot;</span><br><span class="line">                android:gravity=&quot;center_vertical|right&quot;</span><br><span class="line">                android:text=&quot;Adam 评论了\n您的照片\n刚刚&quot;</span><br><span class="line">                android:textColor=&quot;#111&quot;</span><br><span class="line">                android:textSize=&quot;14sp&quot; /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;TextView</span><br><span class="line">                android:layout_width=&quot;200dp&quot;</span><br><span class="line">                android:layout_height=&quot;63dp&quot;</span><br><span class="line">                android:layout_gravity=&quot;right&quot;</span><br><span class="line">                android:drawableLeft=&quot;@drawable/tour_avatar3&quot;</span><br><span class="line">                android:drawablePadding=&quot;8dp&quot;</span><br><span class="line">                android:gravity=&quot;center_vertical|left&quot;</span><br><span class="line">                android:text=&quot;Kaitlyn 收藏了\n您的照片\n刚刚&quot;</span><br><span class="line">                android:textColor=&quot;#111&quot;</span><br><span class="line">                android:textSize=&quot;14sp&quot; /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;TextView</span><br><span class="line">                android:layout_width=&quot;200dp&quot;</span><br><span class="line">                android:layout_height=&quot;63dp&quot;</span><br><span class="line">                android:layout_gravity=&quot;left&quot;</span><br><span class="line">                android:drawablePadding=&quot;8dp&quot;</span><br><span class="line">                android:drawableRight=&quot;@drawable/tour_avatar4&quot;</span><br><span class="line">                android:gravity=&quot;right|center_vertical&quot;</span><br><span class="line">                android:text=&quot;Adam 评论了\n您的照片\n刚刚&quot;</span><br><span class="line">                android:textColor=&quot;#111&quot;</span><br><span class="line">                android:textSize=&quot;14sp&quot; /&gt;</span><br><span class="line">        &lt;/LinearLayout&gt;</span><br><span class="line"></span><br><span class="line">        &lt;LinearLayout</span><br><span class="line">            android:id=&quot;@+id/ll_rows&quot;</span><br><span class="line">            android:layout_width=&quot;600dp&quot;</span><br><span class="line">            android:layout_height=&quot;match_parent&quot;</span><br><span class="line">            android:layout_centerHorizontal=&quot;true&quot;</span><br><span class="line">            android:gravity=&quot;center_horizontal&quot;</span><br><span class="line">            android:orientation=&quot;vertical&quot;&gt;</span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:layout_width=&quot;600dp&quot;</span><br><span class="line">                android:layout_height=&quot;72dp&quot;</span><br><span class="line">                android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">                android:src=&quot;@drawable/row1&quot; /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:layout_width=&quot;600dp&quot;</span><br><span class="line">                android:layout_height=&quot;72dp&quot;</span><br><span class="line">                android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">                android:src=&quot;@drawable/row2&quot; /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:layout_width=&quot;843dp&quot;</span><br><span class="line">                android:layout_height=&quot;72dp&quot;</span><br><span class="line">                android:layout_gravity=&quot;center_horizontal&quot;</span><br><span class="line">                android:layout_marginLeft=&quot;5.5dp&quot;</span><br><span class="line">                android:scaleType=&quot;fitXY&quot;</span><br><span class="line">                android:src=&quot;@drawable/row3&quot; /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:layout_width=&quot;600dp&quot;</span><br><span class="line">                android:layout_height=&quot;72dp&quot;</span><br><span class="line">                android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">                android:src=&quot;@drawable/row4&quot; /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:layout_width=&quot;600dp&quot;</span><br><span class="line">                android:layout_height=&quot;72dp&quot;</span><br><span class="line">                android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">                android:src=&quot;@drawable/row5&quot; /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:layout_width=&quot;600dp&quot;</span><br><span class="line">                android:layout_height=&quot;72dp&quot;</span><br><span class="line">                android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">                android:src=&quot;@drawable/row6&quot; /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:layout_width=&quot;600dp&quot;</span><br><span class="line">                android:layout_height=&quot;72dp&quot;</span><br><span class="line">                android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">                android:src=&quot;@drawable/row7&quot; /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:layout_width=&quot;600dp&quot;</span><br><span class="line">                android:layout_height=&quot;72dp&quot;</span><br><span class="line">                android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">                android:src=&quot;@drawable/row8&quot; /&gt;</span><br><span class="line"></span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:layout_width=&quot;600dp&quot;</span><br><span class="line">                android:layout_height=&quot;72dp&quot;</span><br><span class="line">                android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">                android:src=&quot;@drawable/row9&quot; /&gt;</span><br><span class="line">        &lt;/LinearLayout&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:id=&quot;@+id/iv_device&quot;</span><br><span class="line">            android:layout_width=&quot;340dp&quot;</span><br><span class="line">            android:layout_height=&quot;500dp&quot;</span><br><span class="line">            android:layout_centerInParent=&quot;true&quot;</span><br><span class="line">            android:scaleType=&quot;centerInside&quot;</span><br><span class="line">            android:src=&quot;@drawable/tour_device&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:id=&quot;@+id/iv_initial_phone&quot;</span><br><span class="line">            android:layout_width=&quot;200dp&quot;</span><br><span class="line">            android:layout_height=&quot;400dp&quot;</span><br><span class="line">            android:layout_centerInParent=&quot;true&quot;</span><br><span class="line">            android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">            android:src=&quot;@drawable/tour_initial_photo&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;ImageView</span><br><span class="line">            android:id=&quot;@+id/iv_final_photo&quot;</span><br><span class="line">            android:layout_width=&quot;48dp&quot;</span><br><span class="line">            android:layout_height=&quot;72dp&quot;</span><br><span class="line">            android:layout_centerHorizontal=&quot;true&quot;</span><br><span class="line">            android:layout_marginTop=&quot;144dp&quot;</span><br><span class="line">            android:scaleType=&quot;centerCrop&quot;</span><br><span class="line">            android:src=&quot;@drawable/tour_final_photo&quot; /&gt;</span><br><span class="line"></span><br><span class="line">        &lt;TextView</span><br><span class="line">            android:id=&quot;@+id/tv_avatar_you&quot;</span><br><span class="line">            android:layout_width=&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height=&quot;90dp&quot;</span><br><span class="line">            android:layout_centerHorizontal=&quot;true&quot;</span><br><span class="line">            android:drawableTop=&quot;@drawable/tour_avatar_you&quot;</span><br><span class="line">            android:gravity=&quot;center&quot;</span><br><span class="line">            android:paddingTop=&quot;30dp&quot;</span><br><span class="line">            android:text=&quot;您收藏这张照片\n刚刚&quot;</span><br><span class="line">            android:textColor=&quot;#222&quot;</span><br><span class="line">            android:textSize=&quot;10sp&quot; /&gt;</span><br><span class="line">    &lt;/RelativeLayout&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hanks.com.guideview.BlurringView</span><br><span class="line">        android:id=&quot;@+id/blurringView&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;150dp&quot;</span><br><span class="line">        android:layout_alignParentBottom=&quot;true&quot;</span><br><span class="line">        app:blurRadius=&quot;11&quot;</span><br><span class="line">        app:downsampleFactor=&quot;6&quot;</span><br><span class="line">        app:overlayColor=&quot;#99FFFFFF&quot;</span><br><span class="line">        &gt;</span><br><span class="line"></span><br><span class="line">    &lt;/hanks.com.guideview.BlurringView&gt;</span><br><span class="line"></span><br><span class="line">    &lt;android.support.v4.view.ViewPager</span><br><span class="line">        android:id=&quot;@+id/viewpager&quot;</span><br><span class="line">        android:layout_width=&quot;match_parent&quot;</span><br><span class="line">        android:layout_height=&quot;match_parent&quot;</span><br><span class="line">        &gt;&lt;/android.support.v4.view.ViewPager&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id=&quot;@+id/tv_register&quot;</span><br><span class="line">        android:layout_width=&quot;80dp&quot;</span><br><span class="line">        android:layout_height=&quot;25dp&quot;</span><br><span class="line">        android:layout_alignParentBottom=&quot;true&quot;</span><br><span class="line">        android:layout_centerHorizontal=&quot;true&quot;</span><br><span class="line">        android:layout_marginBottom=&quot;15dp&quot;</span><br><span class="line">        android:background=&quot;#2595ec&quot;</span><br><span class="line">        android:gravity=&quot;center&quot;</span><br><span class="line">        android:text=&quot;注册&quot;</span><br><span class="line">        android:textColor=&quot;#fff&quot;</span><br><span class="line">        android:textSize=&quot;12sp&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;/RelativeLayout&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><span class="line">package hanks.com.guideview;</span><br><span class="line"></span><br><span class="line">import android.os.Bundle;</span><br><span class="line">import android.support.v4.app.Fragment;</span><br><span class="line">import android.support.v4.app.FragmentActivity;</span><br><span class="line">import android.support.v4.app.FragmentManager;</span><br><span class="line">import android.support.v4.app.FragmentPagerAdapter;</span><br><span class="line">import android.support.v4.view.ViewPager;</span><br><span class="line">import android.util.Log;</span><br><span class="line">import android.view.View;</span><br><span class="line">import android.view.WindowManager;</span><br><span class="line">import android.widget.ImageView;</span><br><span class="line">import android.widget.LinearLayout;</span><br><span class="line">import android.widget.TextView;</span><br><span class="line"></span><br><span class="line">import java.util.ArrayList;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * by Hanks</span><br><span class="line"> */</span><br><span class="line">public class MainActivity extends FragmentActivity &#123;</span><br><span class="line"></span><br><span class="line">    private ViewPager viewpager;</span><br><span class="line">    private ImageView iv_device, iv_initial_phone;</span><br><span class="line">    private ImageView iv_final_photo;</span><br><span class="line">    private List&lt;Fragment&gt; fragmentList = new ArrayList&lt;&gt;();</span><br><span class="line">    private LinearLayout ll_rows, ll_comments;</span><br><span class="line">    private float currentPosition = 0;</span><br><span class="line">    private GuideFragment fragment00, fragment01, fragment02, fragment03;</span><br><span class="line">    private TextView tv_avatar_you;</span><br><span class="line">    private TextView tv_register;</span><br><span class="line"></span><br><span class="line">    private BlurringView blurringView;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);//去掉信息栏</span><br><span class="line">        setContentView(R.layout.activity_main);</span><br><span class="line">        setFullscreen();</span><br><span class="line"></span><br><span class="line">        fragment00 = new GuideFragment();</span><br><span class="line">        fragment01 = new GuideFragment();</span><br><span class="line">        fragment02 = new GuideFragment();</span><br><span class="line">        fragment03 = new GuideFragment();</span><br><span class="line"></span><br><span class="line">        fragmentList.add(fragment00);</span><br><span class="line">        fragmentList.add(fragment01);</span><br><span class="line">        fragmentList.add(fragment02);</span><br><span class="line">        fragmentList.add(fragment03);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        viewpager = (ViewPager) findViewById(R.id.viewpager);</span><br><span class="line">        iv_device = (ImageView) findViewById(R.id.iv_device);</span><br><span class="line">        iv_final_photo = (ImageView) findViewById(R.id.iv_final_photo);</span><br><span class="line">        tv_avatar_you = (TextView) findViewById(R.id.tv_avatar_you);</span><br><span class="line">        tv_register = (TextView) findViewById(R.id.tv_register);</span><br><span class="line"></span><br><span class="line">        blurringView = (BlurringView) findViewById(R.id.blurringView);</span><br><span class="line"></span><br><span class="line">        ll_rows = (LinearLayout) findViewById(R.id.ll_rows);</span><br><span class="line">        ll_comments = (LinearLayout) findViewById(R.id.ll_comments);</span><br><span class="line"></span><br><span class="line">        iv_initial_phone = (ImageView) findViewById(R.id.iv_initial_phone);</span><br><span class="line"></span><br><span class="line">        View blurredView = findViewById(R.id.blurredView);</span><br><span class="line">        blurringView.setBlurredView(blurredView);</span><br><span class="line"></span><br><span class="line">        //创建adapter</span><br><span class="line">        GuideAdapter adapter = new GuideAdapter(getSupportFragmentManager());</span><br><span class="line">        //设置viewpager缓存页数,默认的缓存一页,因为引导页共有4页,</span><br><span class="line">        //所以设置缓存3页,这样所以page在滑动过程中不会重新创建</span><br><span class="line">        viewpager.setOffscreenPageLimit(3);</span><br><span class="line">        viewpager.setAdapter(adapter);</span><br><span class="line">        viewpager.setPageTransformer(true, new HKTransformer());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void setFullscreen() &#123;</span><br><span class="line">        View decorView = getWindow().getDecorView();</span><br><span class="line">        int uiOptions = View.SYSTEM_UI_FLAG_HIDE_NAVIGATION</span><br><span class="line">                | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN</span><br><span class="line">                | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION</span><br><span class="line">                | View.SYSTEM_UI_FLAG_FULLSCREEN</span><br><span class="line">                | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY;</span><br><span class="line">        decorView.setSystemUiVisibility(uiOptions);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    class GuideAdapter extends FragmentPagerAdapter &#123;</span><br><span class="line">        public GuideAdapter(FragmentManager fm) &#123;</span><br><span class="line">            super(fm);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public Fragment getItem(int position) &#123;</span><br><span class="line">            return fragmentList.get(position);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public int getCount() &#123;</span><br><span class="line">            return fragmentList.size();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * by Hanks</span><br><span class="line">     */</span><br><span class="line">    class HKTransformer implements ViewPager.PageTransformer &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void transformPage(View view, float position) &#123;</span><br><span class="line">            if (fragment00.getView() == view) &#123;</span><br><span class="line">                Log.i(&quot;&quot;, &quot;view:    &quot; + view + &quot;position= &quot; + position);</span><br><span class="line">                currentPosition = position;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            blurringView.invalidate();</span><br><span class="line"></span><br><span class="line">            if (position &lt; -1) &#123; // [-Infinity,-1)</span><br><span class="line">                // This page is way off-screen to the left.</span><br><span class="line">            &#125; else if (position &lt;= 0) &#123; // [-1,0]</span><br><span class="line">                // Use the default slide transition when moving to the left page</span><br><span class="line">            &#125; else if (position &lt;= 1) &#123; // (0,1]</span><br><span class="line">                // Fade the page out.</span><br><span class="line"></span><br><span class="line">                float p = Math.abs(position);</span><br><span class="line">                float f = (1 - p);</span><br><span class="line"></span><br><span class="line">                Log.i(&quot;&quot;, &quot;p= &quot; + p);</span><br><span class="line">                // p : 1~0</span><br><span class="line">                // f : 0~1</span><br><span class="line"></span><br><span class="line">                iv_final_photo.setPivotY(0f);</span><br><span class="line">                iv_final_photo.setPivotX(iv_final_photo.getWidth() / 2);</span><br><span class="line"></span><br><span class="line">                if (-1 &lt; currentPosition &amp;&amp; currentPosition &lt;= 0) &#123;</span><br><span class="line">                    // A ~ B 界面的动画</span><br><span class="line"></span><br><span class="line">                    iv_initial_phone.setTranslationY(-600 * f);</span><br><span class="line">                    iv_initial_phone.setScaleX(0.5f * p + 0.5f);</span><br><span class="line">                    iv_initial_phone.setScaleY(0.5f * p + 0.5f);</span><br><span class="line">                    iv_device.setScaleX(1 + 2 * f);</span><br><span class="line"></span><br><span class="line">                    if (p &gt; 0.5 &amp;&amp; p &lt;= 1) &#123;</span><br><span class="line">                        iv_device.setAlpha(2 * p - 1);</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        iv_device.setAlpha(0f);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    ll_comments.setTranslationY(800 * p);</span><br><span class="line">                    ll_comments.setAlpha(f);</span><br><span class="line">                    ll_comments.setScaleX(2 - f);</span><br><span class="line">                    ll_comments.setScaleY(2 - f);</span><br><span class="line"></span><br><span class="line">                    ll_rows.setTranslationY(-1000 - 500 * p);</span><br><span class="line">                    ll_rows.setAlpha(0.5f);</span><br><span class="line">                    iv_final_photo.setTranslationY(-1000 - 500 * p);</span><br><span class="line">                    iv_final_photo.setAlpha(0.5f);</span><br><span class="line"></span><br><span class="line">                    tv_avatar_you.setTranslationY(-300);</span><br><span class="line"></span><br><span class="line">                    tv_register.setTranslationY(300);</span><br><span class="line"></span><br><span class="line">                &#125; else if (-2 &lt; currentPosition &amp;&amp; currentPosition &lt;= -1) &#123;</span><br><span class="line">                    // B ~ C 界面的动画</span><br><span class="line"></span><br><span class="line">                    iv_initial_phone.setTranslationY(-600 + -300 * f);</span><br><span class="line"></span><br><span class="line">                    ll_comments.setAlpha(p);</span><br><span class="line"></span><br><span class="line">                    ll_rows.setTranslationY(-1000 * p);</span><br><span class="line">                    ll_rows.setAlpha(0.5f + 0.5f * f);</span><br><span class="line"></span><br><span class="line">                    iv_final_photo.setTranslationY(-1000 * p);</span><br><span class="line">                    iv_final_photo.setAlpha(0.5f + 0.5f * f);</span><br><span class="line"></span><br><span class="line">                    tv_avatar_you.setTranslationY(-300);</span><br><span class="line">                    tv_register.setTranslationY(300);</span><br><span class="line">                &#125; else if (-3 &lt; currentPosition &amp;&amp; currentPosition &lt;= -2) &#123;</span><br><span class="line">                    // C ~ D 界面的动画</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    iv_final_photo.setScaleX(1 + 3 * f); //1~3</span><br><span class="line">                    iv_final_photo.setScaleY(1 + 3 * f); //1~3</span><br><span class="line"></span><br><span class="line">                    for (int i = 0; i &lt; ll_rows.getChildCount(); i++) &#123;</span><br><span class="line">                        View child = ll_rows.getChildAt(i);</span><br><span class="line">                        child.setAlpha(p);</span><br><span class="line">                        if (i % 2 == 0) &#123;</span><br><span class="line">                            child.setTranslationX(100 * f);</span><br><span class="line">                        &#125; else &#123;</span><br><span class="line">                            child.setTranslationX(-100 * f);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    tv_avatar_you.setTranslationY(-300 + 300 * f);</span><br><span class="line"></span><br><span class="line">                    tv_register.setTranslationY(300 - 300 * f);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            &#125; else &#123; // (1,+Infinity]</span><br><span class="line">                // This page is way off-screen to the right.</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>源代码下载:<a target="_blank" rel="noopener" href="https://github.com/hanks-zyh/500px-guideview">https://github.com/hanks-zyh/500px-guideview</a></p>

      
    </div>
</article>

<!-- 上一页 下一页 -->


<nav id="article-nav">
  
    <a href="/2015/08/27/front-end/" id="article-nav-newer" class="article-nav-link-wrap">
      <i class="fa fa-chevron-left"></i><span>上一篇</span>
      <div class="article-nav-title">
        
          front-end
        
      </div>
    </a>
  
  
    <a href="/2015/08/17/HTTPie__a_CLI,_cURL-like_tool_for_humans/" id="article-nav-older" class="article-nav-link-wrap">
      <i class="fa fa-chevron-left"></i><span>下一篇</span>
      <div class="article-nav-title">HTTPie:a CLI, cURL-like tool for humans</div>
    </a>
  
</nav>



<!-- 相关文章 -->

<!--

-->


</section>
      </div>
      <footer id="footer">
  <div class="outer footer_center">
    <div id="footer-info" class="inner">
      
      &copy;2024<a target="_blank" rel="noopener" href="https://github.com/hanks-zyh"> Hanks</a>版权所有
      <br/>
      <a href="https://beian.miit.gov.cn/" target="_blank">豫ICP备2021022347号</a>
	  </div>
  </div>
 <div id="share">
  <a id="totop" title="" style="display: block;">返回顶部</a>
 </div>
</footer>

    </div>
    


<script src="/js/jquery.min.js"></script>


<script src="/js/jquery.scrollLoading.js"></script>





<script src="/js/script.js"></script>


<script src="/js/ads.js"></script>

  </div>
</body>
</html>
